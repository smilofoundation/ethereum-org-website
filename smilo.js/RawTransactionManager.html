<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Smilo</title>
    <meta name="description" content="">
    <meta/ name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,maximum-scale=1"></meta/>
  <link rel="icon" type="image/png" href="/favicon.png">
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="smilo.foundation">
  <meta property="og:url" content="https://smilo.foundation">
  <meta property="og:image" content="https://smilo.foundation/og-image.png">
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:site" content="@smiloplatform">
  <meta property="twitter:creator" content="@smiloplatform">
  <meta property="twitter:image" content="https://smilo.foundation/og-image-twitter.png">
    <link rel="preload" href="/assets/css/0.styles.77284882.css" as="style"><link rel="preload" href="/assets/js/app.1c5a03b7.js" as="script"><link rel="preload" href="/assets/js/3.030594d3.js" as="script"><link rel="preload" href="/assets/js/127.25ff388a.js" as="script"><link rel="prefetch" href="/assets/js/10.6e3e9273.js"><link rel="prefetch" href="/assets/js/100.54f82e92.js"><link rel="prefetch" href="/assets/js/101.0d7e4727.js"><link rel="prefetch" href="/assets/js/102.e09888c2.js"><link rel="prefetch" href="/assets/js/103.12c4db4a.js"><link rel="prefetch" href="/assets/js/104.917d85b3.js"><link rel="prefetch" href="/assets/js/105.2c8a97c2.js"><link rel="prefetch" href="/assets/js/106.137429f1.js"><link rel="prefetch" href="/assets/js/107.3dd3c2b0.js"><link rel="prefetch" href="/assets/js/108.ae0d09f1.js"><link rel="prefetch" href="/assets/js/109.05199ced.js"><link rel="prefetch" href="/assets/js/11.f4ce1d53.js"><link rel="prefetch" href="/assets/js/110.72857918.js"><link rel="prefetch" href="/assets/js/111.5c9c5ec1.js"><link rel="prefetch" href="/assets/js/112.4b4aa971.js"><link rel="prefetch" href="/assets/js/113.467b4f39.js"><link rel="prefetch" href="/assets/js/114.e37bc94a.js"><link rel="prefetch" href="/assets/js/115.e2033c8c.js"><link rel="prefetch" href="/assets/js/116.0f3bb3de.js"><link rel="prefetch" href="/assets/js/117.97f66c3d.js"><link rel="prefetch" href="/assets/js/118.61cc124c.js"><link rel="prefetch" href="/assets/js/119.70620c50.js"><link rel="prefetch" href="/assets/js/12.068e04f8.js"><link rel="prefetch" href="/assets/js/120.43a34ff2.js"><link rel="prefetch" href="/assets/js/121.80ec60ad.js"><link rel="prefetch" href="/assets/js/122.f38284d1.js"><link rel="prefetch" href="/assets/js/123.1dc518a3.js"><link rel="prefetch" href="/assets/js/124.5765d2e5.js"><link rel="prefetch" href="/assets/js/125.c734c24f.js"><link rel="prefetch" href="/assets/js/126.79b78b84.js"><link rel="prefetch" href="/assets/js/128.1496ac92.js"><link rel="prefetch" href="/assets/js/129.4e04e6cc.js"><link rel="prefetch" href="/assets/js/13.bda859e5.js"><link rel="prefetch" href="/assets/js/130.f107b701.js"><link rel="prefetch" href="/assets/js/131.08b783f2.js"><link rel="prefetch" href="/assets/js/14.2a400896.js"><link rel="prefetch" href="/assets/js/15.295d62fc.js"><link rel="prefetch" href="/assets/js/16.652a89b0.js"><link rel="prefetch" href="/assets/js/17.3be5eda0.js"><link rel="prefetch" href="/assets/js/18.32454e69.js"><link rel="prefetch" href="/assets/js/19.a08feb93.js"><link rel="prefetch" href="/assets/js/2.4b1d4bf3.js"><link rel="prefetch" href="/assets/js/20.34e166bb.js"><link rel="prefetch" href="/assets/js/21.1d2ef408.js"><link rel="prefetch" href="/assets/js/22.2a6cd144.js"><link rel="prefetch" href="/assets/js/23.5adcd431.js"><link rel="prefetch" href="/assets/js/24.9bccf9d1.js"><link rel="prefetch" href="/assets/js/25.d8fd4102.js"><link rel="prefetch" href="/assets/js/26.40635db2.js"><link rel="prefetch" href="/assets/js/27.9a5f2d44.js"><link rel="prefetch" href="/assets/js/28.2d385e7d.js"><link rel="prefetch" href="/assets/js/29.da082ef6.js"><link rel="prefetch" href="/assets/js/30.73aec03b.js"><link rel="prefetch" href="/assets/js/31.f86eee3a.js"><link rel="prefetch" href="/assets/js/32.46e321e1.js"><link rel="prefetch" href="/assets/js/33.e63e33f3.js"><link rel="prefetch" href="/assets/js/34.1d8e044f.js"><link rel="prefetch" href="/assets/js/35.af094489.js"><link rel="prefetch" href="/assets/js/36.fd9805c3.js"><link rel="prefetch" href="/assets/js/37.7a620d2c.js"><link rel="prefetch" href="/assets/js/38.eac140f8.js"><link rel="prefetch" href="/assets/js/39.3a26a316.js"><link rel="prefetch" href="/assets/js/4.9ea4066c.js"><link rel="prefetch" href="/assets/js/40.c0974fab.js"><link rel="prefetch" href="/assets/js/41.62cd62ac.js"><link rel="prefetch" href="/assets/js/42.20944c6a.js"><link rel="prefetch" href="/assets/js/43.e88d32e5.js"><link rel="prefetch" href="/assets/js/44.9d1312b3.js"><link rel="prefetch" href="/assets/js/45.e68f16da.js"><link rel="prefetch" href="/assets/js/46.20ba1095.js"><link rel="prefetch" href="/assets/js/47.37709ee2.js"><link rel="prefetch" href="/assets/js/48.d96ab555.js"><link rel="prefetch" href="/assets/js/49.59fb3a5d.js"><link rel="prefetch" href="/assets/js/5.9c269fae.js"><link rel="prefetch" href="/assets/js/50.dd2320c1.js"><link rel="prefetch" href="/assets/js/51.99326924.js"><link rel="prefetch" href="/assets/js/52.2f8bdcae.js"><link rel="prefetch" href="/assets/js/53.b65c9b3b.js"><link rel="prefetch" href="/assets/js/54.8f1c1e12.js"><link rel="prefetch" href="/assets/js/55.abe1f4b6.js"><link rel="prefetch" href="/assets/js/56.1b79c9a4.js"><link rel="prefetch" href="/assets/js/57.97bf7386.js"><link rel="prefetch" href="/assets/js/58.eab2d512.js"><link rel="prefetch" href="/assets/js/59.dc4064e5.js"><link rel="prefetch" href="/assets/js/6.530b08db.js"><link rel="prefetch" href="/assets/js/60.6c9bd626.js"><link rel="prefetch" href="/assets/js/61.7d3b7f84.js"><link rel="prefetch" href="/assets/js/62.0a97fcb0.js"><link rel="prefetch" href="/assets/js/63.15d50454.js"><link rel="prefetch" href="/assets/js/64.9fe77f7e.js"><link rel="prefetch" href="/assets/js/65.d0f3dc77.js"><link rel="prefetch" href="/assets/js/66.75f6f323.js"><link rel="prefetch" href="/assets/js/67.997e57cb.js"><link rel="prefetch" href="/assets/js/68.c627100e.js"><link rel="prefetch" href="/assets/js/69.1757e396.js"><link rel="prefetch" href="/assets/js/7.393450db.js"><link rel="prefetch" href="/assets/js/70.4fead485.js"><link rel="prefetch" href="/assets/js/71.9d601385.js"><link rel="prefetch" href="/assets/js/72.df61f604.js"><link rel="prefetch" href="/assets/js/73.1ba6adec.js"><link rel="prefetch" href="/assets/js/74.dae5c946.js"><link rel="prefetch" href="/assets/js/75.ed1750af.js"><link rel="prefetch" href="/assets/js/76.23271b77.js"><link rel="prefetch" href="/assets/js/77.8f47131e.js"><link rel="prefetch" href="/assets/js/78.49a99228.js"><link rel="prefetch" href="/assets/js/79.66c05d68.js"><link rel="prefetch" href="/assets/js/8.afe1cb0f.js"><link rel="prefetch" href="/assets/js/80.14ebffb1.js"><link rel="prefetch" href="/assets/js/81.f69d7b2b.js"><link rel="prefetch" href="/assets/js/82.79ac4d75.js"><link rel="prefetch" href="/assets/js/83.5551e100.js"><link rel="prefetch" href="/assets/js/84.9d9dd0e5.js"><link rel="prefetch" href="/assets/js/85.41e7de0a.js"><link rel="prefetch" href="/assets/js/86.5ada016f.js"><link rel="prefetch" href="/assets/js/87.5cf495b9.js"><link rel="prefetch" href="/assets/js/88.2ac2cd3b.js"><link rel="prefetch" href="/assets/js/89.7816c1f3.js"><link rel="prefetch" href="/assets/js/9.828672e1.js"><link rel="prefetch" href="/assets/js/90.c5ba453d.js"><link rel="prefetch" href="/assets/js/91.257808f3.js"><link rel="prefetch" href="/assets/js/92.0425b893.js"><link rel="prefetch" href="/assets/js/93.caafd925.js"><link rel="prefetch" href="/assets/js/94.190ec2a0.js"><link rel="prefetch" href="/assets/js/95.3fbee9bb.js"><link rel="prefetch" href="/assets/js/96.ced1da5b.js"><link rel="prefetch" href="/assets/js/97.b518b74f.js"><link rel="prefetch" href="/assets/js/98.09a32c0b.js"><link rel="prefetch" href="/assets/js/99.503bd021.js">
    <link rel="stylesheet" href="/assets/css/0.styles.77284882.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="wrapper" data-v-586e078c><header class="header-right flex" data-v-6f1c53dc data-v-586e078c><div class="flex" data-v-6f1c53dc><div class="sidebar-button" data-v-6f1c53dc><svg width="25px" height="20px" viewBox="0 0 25 20" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" class="icon"><title>Hamburger menu button</title> <g transform="translate(-22.000000, -2.000000)"><g transform="translate(22.000000, 2.545974)"><path d="M24.7714844,0.5 L0,0.5"></path> <path d="M24.7714844,9.72701303 L0,9.72701303"></path> <path d="M24.7714844,18.9540261 L0,18.9540261"></path></g></g></svg> <a href="/" class="home-link router-link-active"><span class="site-name">Smilo</span></a></div> <a href="/" class="router-link-active" data-v-6f1c53dc><img src="/assets/img/ethereum-logo-wireframe.8c2f2894.png" alt="Smilo Logo" class="header-logo sm-hide" data-v-6f1c53dc></a> <nav class="nav-links sm-hide" data-v-6f1c53dc><ul class="nav-ul"><li class="nav-item"><a href="/" class="nav-link">Smilo</a></li><li class="nav-item"><a href="/beginners/" class="nav-link">Beginners</a></li><li class="nav-item"><a href="/use/" class="nav-link">Use</a></li><li class="nav-item"><a href="/learn/" class="nav-link">Learn</a></li><li class="nav-item"><a href="/developers/" class="nav-link">Developers</a></li> <!----></ul></nav></div> <div class="menu inline flex flex-center" data-v-6f1c53dc><div class="search-box" data-v-6f1c53dc><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <a href="https://github.com/smilofoundation/smilo-foundation-website" target="_blank" title="Fork This Page (Github)" data-v-6f1c53dc><img alt="Github" src="/assets/img/icon-github.3720c649.svg" class="hide-dark" data-v-6f1c53dc> <img alt="Github" src="/assets/img/icon-github-white.e05d488b.svg" class="show-dark" data-v-6f1c53dc></a> <span class="pointer view-mode" data-v-6f1c53dc><img alt="Switch to Dark Mode" src="/assets/img/icon-sun.f0087fa4.svg" class="hide-dark" data-v-6f1c53dc> <img alt="Switch to Light Mode" src="/assets/img/icon-moon.0d522939.svg" class="show-dark" data-v-6f1c53dc></span> <div class="dropdown-wrapper sm-hide" data-v-6f1c53dc><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/smilo.js/RawTransactionManager.html" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/ko/" class="nav-link">Korean</a></li></ul></div></div></header> <!----> <main class="page" data-v-586e078c><div class="content__default" data-v-586e078c><p>The <code>RawTransactionManager</code> module of Smilo.js provides access to private transaction APIs that require a connection to a <a href="../../Privacy/Privacy-Manager">Privacy Manager</a>.</p> <h2 id="example"><a href="#example" aria-hidden="true" class="header-anchor">↳</a> Example</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> Web3 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;web3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> smilojs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;Smilo-js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> web3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Web3</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:22000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> tlsOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
    key<span class="token punctuation">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">&quot;./cert.key&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    clcert<span class="token punctuation">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">&quot;./cert.pem&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    cacert<span class="token punctuation">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">&quot;./cacert.pem&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    allowInsecure<span class="token punctuation">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> enclaveOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
    privateUrl<span class="token punctuation">:</span> <span class="token string">&quot;http://localhost:9081&quot;</span><span class="token punctuation">,</span>
    tlsSettings<span class="token punctuation">:</span> tlsOptions
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> txnMngr <span class="token operator">=</span> smilojs<span class="token punctuation">.</span><span class="token function">RawTransactionManager</span><span class="token punctuation">(</span>web3<span class="token punctuation">,</span> enclaveOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>
txnMngr<span class="token punctuation">.</span><span class="token function">sendRawTransaction</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="parameters"><a href="#parameters" aria-hidden="true" class="header-anchor">↳</a> Parameters</h2> <table><thead><tr><th style="text-align:center;">param</th> <th style="text-align:center;">type</th> <th style="text-align:center;">required</th> <th>description</th></tr></thead> <tbody><tr><td style="text-align:center;"><span style="white-space:nowrap;"><code>web3</code></span></td> <td style="text-align:center;"><code>Object</code></td> <td style="text-align:center;">yes</td> <td>web3 instance</td></tr> <tr><td style="text-align:center;"><span style="white-space:nowrap;"><code>enclaveOptions</code></span></td> <td style="text-align:center;"><code>Object</code></td> <td style="text-align:center;">yes</td> <td>Privacy Manager connection configuration - see <a href="#enclaveoptions">enclaveOptions</a></td></tr></tbody></table> <h3 id="enclaveoptions"><a href="#enclaveoptions" aria-hidden="true" class="header-anchor">↳</a> enclaveOptions</h3> <table><thead><tr><th style="text-align:center;">param</th> <th style="text-align:center;">type</th> <th style="text-align:center;">required</th> <th>description</th></tr></thead> <tbody><tr><td style="text-align:center;"><span style="white-space:nowrap;"><code>privateUrl</code></span></td> <td style="text-align:center;"><code>String</code></td> <td style="text-align:center;">yes (unless <code>ipcPath</code> is provided)</td> <td>Tessera <code>ThirdParty</code> server url (if using the Constellation Privacy Manager use <code>ipcPath</code> instead)</td></tr> <tr><td style="text-align:center;"><span style="white-space:nowrap;"><code>ipcPath</code></span></td> <td style="text-align:center;"><code>String</code></td> <td style="text-align:center;">no</td> <td>path to Privacy Manager <code>.ipc</code> socket file, <code>privateUrl</code> is preferred</td></tr> <tr><td style="text-align:center;"><span style="white-space:nowrap;"><code>tlsSettings</code></span></td> <td style="text-align:center;"><code>Object</code></td> <td style="text-align:center;">no</td> <td>TLS configuration for HTTPS Privacy Manager connections - see <a href="#tlssettings">tlsSettings</a></td></tr></tbody></table> <h3 id="tlssettings"><a href="#tlssettings" aria-hidden="true" class="header-anchor">↳</a> tlsSettings</h3> <table><thead><tr><th style="text-align:center;">param</th> <th style="text-align:center;">type</th> <th style="text-align:center;">required</th> <th>description</th></tr></thead> <tbody><tr><td style="text-align:center;"><span style="white-space:nowrap;"><code>key</code></span></td> <td style="text-align:center;"><code>String</code></td> <td style="text-align:center;">no</td> <td>client private key as byte string</td></tr> <tr><td style="text-align:center;"><span style="white-space:nowrap;"><code>clcert</code></span></td> <td style="text-align:center;"><code>String</code></td> <td style="text-align:center;">no</td> <td>client certificate (signed/unsigned) as byte string</td></tr> <tr><td style="text-align:center;"><span style="white-space:nowrap;"><code>cacert</code></span></td> <td style="text-align:center;"><code>String</code></td> <td style="text-align:center;">no</td> <td>CA certificate as byte string</td></tr> <tr><td style="text-align:center;"><span style="white-space:nowrap;"><code>allowInsecure</code></span></td> <td style="text-align:center;"><code>boolean</code></td> <td style="text-align:center;">no</td> <td>do not verify the Privacy Manager's certificate (can be used to allow self-signed certificates)</td></tr></tbody></table> <h2 id="methods"><a href="#methods" aria-hidden="true" class="header-anchor">↳</a> Methods</h2> <h3 id="sendrawtransaction"><a href="#sendrawtransaction" aria-hidden="true" class="header-anchor">↳</a> sendRawTransaction</h3> <p>!!! info &quot;If using Constellation&quot;
Constellation privacy managers do not support this method.  Use <a href="#sendrawtransactionviasendapi"><code>sendRawTransactionViaSendAPI</code></a> instead.</p> <div class="language-js extra-class"><pre class="language-js"><code>txnMngr<span class="token punctuation">.</span><span class="token function">sendRawTransaction</span><span class="token punctuation">(</span>txnParams<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Calls Tessera's <code>ThirdParty</code> <code>/storeraw</code> API, replaces the <code>data</code> field in <code>txnParams</code> with the response (i.e. encrypted-payload hash), signs the transaction with the <code>from</code> account defined in <code>txnParams</code>, marks the transaction as private, RLP encodes the transaction in hex format, and submits the signed transaction to the blockchain with <code>eth_sendRawPrivateTransaction</code>.</p> <h4 id="parameters-2"><a href="#parameters-2" aria-hidden="true" class="header-anchor">↳</a> Parameters</h4> <ol><li><code>txnParams</code> - The transaction to sign and send
<ul><li><code>gasPrice</code>: <code>Number</code> - Must always be 0 in Smilo networks</li> <li><code>gasLimit</code>: <code>Number</code> - The amount of gas to use for the transaction</li> <li><code>to</code>: <code>String</code> - (optional) The destination address of the message, left undefined for a contract-creation transaction</li> <li><code>value</code>: <code>Number</code> - (optional) The value transferred for the transaction</li> <li><code>data</code>: <code>String</code> - (optional) Either a byte string containing the associated data of the message, or the initialisation code (bytecode) in the case of a contract-creation transaction</li> <li><code>from</code> - <code>Object</code>: <a href="https://web3js.readthedocs.io/en/v1.2.7/web3-eth-accounts.html#decrypt" target="_blank" rel="noopener noreferrer">Decrypted account object<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><code>nonce</code>: <code>Number</code>  - (optional) Integer of a nonce. This allows to overwrite your own pending transactions that use the same nonce</li> <li><code>privateFrom</code>: <code>String</code>  - When sending a private transaction, the sending party's base64-encoded public key to use. If not present <em>and</em> passing <code>privateFor</code>, the default key as configured in the <code>TransactionManager</code> is used</li> <li><code>privateFor</code>: <code>List&lt;String&gt;</code>  - When sending a private transaction, an array of the recipients' base64-encoded public keys</li> <li><code>isPrivate</code>: <code>boolean</code> - Is the transaction private</li></ul></li> <li><code>Function</code> - (optional) If you pass a callback the HTTP request is made asynchronous.</li></ol> <h4 id="returns"><a href="#returns" aria-hidden="true" class="header-anchor">↳</a> Returns</h4> <p>A promise that resolves to the transaction receipt if the transaction was sent successfully, else rejects with an error.</p> <h3 id="sendrawtransactionviasendapi"><a href="#sendrawtransactionviasendapi" aria-hidden="true" class="header-anchor">↳</a> sendRawTransactionViaSendAPI</h3> <p>!!! info &quot;If using Tessera&quot;
Tessera privacy managers support <a href="#sendrawtransaction"><code>sendRawTransaction</code></a> which should be used instead.  <code>sendRawTransactionViaSendAPI</code> requires exposing the <code>Q2T</code> server to the <code>js</code> app.  Ideally only the <code>ThirdParty</code> server should be exposed to such applications.</p> <div class="language-js extra-class"><pre class="language-js"><code>txnMngr<span class="token punctuation">.</span><span class="token function">sendRawTransactionViaSendAPI</span><span class="token punctuation">(</span>txnParams<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Calls Privacy Manager's <code>/send</code> API to encrypt txn data and send to all participant Privacy Manager nodes, replaces <code>data</code> field in <code>txnParams</code> with response (i.e. encrypted-payload hash), signs the transaction with the <code>from</code> account defined in <code>txnParams</code>, marks the transaction as private, and submits the signed transaction to the blockchain with <code>eth_sendRawTransaction</code>.</p> <h4 id="parameters-3"><a href="#parameters-3" aria-hidden="true" class="header-anchor">↳</a> Parameters</h4> <ol><li><code>txnParams</code> - The transaction to sign and send
<ul><li><code>gasPrice</code>: <code>Number</code> - Must always be 0 in Smilo networks</li> <li><code>gasLimit</code>: <code>Number</code> - The amount of gas to use for the transaction</li> <li><code>to</code>: <code>String</code> - (optional) The destination address of the message, left undefined for a contract-creation transaction</li> <li><code>value</code>: <code>Number</code> - (optional) The value transferred for the transaction</li> <li><code>data</code>: <code>String</code> - (optional) Either a byte string containing the associated data of the message, or the initialisation code (bytecode) in the case of a contract-creation transaction</li> <li><code>from</code> - <code>Object</code>: <a href="https://web3js.readthedocs.io/en/v1.2.7/web3-eth-accounts.html#decrypt" target="_blank" rel="noopener noreferrer">Decrypted account object<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><code>nonce</code>: <code>Number</code>  - (optional) Integer of a nonce. This allows to overwrite your own pending transactions that use the same nonce</li> <li><code>privateFrom</code>: <code>String</code>  - When sending a private transaction, the sending party's base64-encoded public key to use. If not present <em>and</em> passing <code>privateFor</code>, the default key as configured in the <code>TransactionManager</code> is used</li> <li><code>privateFor</code>: <code>List&lt;String&gt;</code>  - When sending a private transaction, an array of the recipients' base64-encoded public keys</li> <li><code>isPrivate</code>: <code>boolean</code> - Is the transaction private</li></ul></li> <li><code>Function</code> - (optional) If you pass a callback the HTTP request is made asynchronous.</li></ol> <h4 id="returns-2"><a href="#returns-2" aria-hidden="true" class="header-anchor">↳</a> Returns</h4> <p>A promise that resolves to the transaction receipt if the transaction was sent successfully, else rejects with an error.</p> <h3 id="setprivate"><a href="#setprivate" aria-hidden="true" class="header-anchor">↳</a> setPrivate</h3> <div class="language-js extra-class"><pre class="language-js"><code>txnMngr<span class="token punctuation">.</span><span class="token function">setPrivate</span><span class="token punctuation">(</span>rawTransaction<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Marks a signed transaction as private by changing the value of <code>v</code> to <code>37</code> or <code>38</code>.</p> <h4 id="parameters-4"><a href="#parameters-4" aria-hidden="true" class="header-anchor">↳</a> Parameters</h4> <ol><li><code>rawTransaction</code>: <code>String</code> - RLP-encoded hex-format signed transaction</li></ol> <h4 id="returns-3"><a href="#returns-3" aria-hidden="true" class="header-anchor">↳</a> Returns</h4> <p>Updated RLP-encoded hex-format signed transaction</p> <h3 id="storerawrequest"><a href="#storerawrequest" aria-hidden="true" class="header-anchor">↳</a> storeRawRequest</h3> <div class="language-js extra-class"><pre class="language-js"><code>txnMngr<span class="token punctuation">.</span><span class="token function">storeRawRequest</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> privateFrom<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Calls Tessera's <code>ThirdParty</code> <code>/storeraw</code> API to encrypt the provided <code>data</code> and store in preparation for a <code>eth_sendRawPrivateTransaction</code>.</p> <h4 id="parameters-5"><a href="#parameters-5" aria-hidden="true" class="header-anchor">↳</a> Parameters</h4> <ol><li><code>data</code>: <code>String</code> - Hex encoded private transaction data (i.e. value of <code>data</code>/<code>input</code> field in the transaction)</li> <li><code>privateFrom</code>: <code>String</code> - Sending party's base64-encoded public key</li></ol> <h4 id="returns-4"><a href="#returns-4" aria-hidden="true" class="header-anchor">↳</a> Returns</h4> <p>A promise that resolves to the hex-encoded hash of the encrypted <code>data</code> (<code>key</code> field) that should be used to replace the <code>data</code> field of a transaction if externally signing.</p> <h3 id="sendrawrequest"><a href="#sendrawrequest" aria-hidden="true" class="header-anchor">↳</a> sendRawRequest</h3> <div class="language-js extra-class"><pre class="language-js"><code>txnMngr<span class="token punctuation">.</span><span class="token function">sendRawRequest</span><span class="token punctuation">(</span>rawTransaction<span class="token punctuation">,</span> privateFor<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Call <code>eth_sendRawPrivateTransaction</code>, sending the signed transaction to the recipients specified in <code>privateFor</code>.</p> <h4 id="parameters-6"><a href="#parameters-6" aria-hidden="true" class="header-anchor">↳</a> Parameters</h4> <ol><li><code>rawTransaction</code>: <code>String</code> - RLP-encoded hex-format signed transaction</li> <li><code>privateFor</code>: <code>List&lt;String&gt;</code> - List of the recipients' base64-encoded public keys</li></ol> <h4 id="returns-5"><a href="#returns-5" aria-hidden="true" class="header-anchor">↳</a> Returns</h4> <p>A promise that resolves to the transaction receipt if the transaction was sent successfully, else rejects with an error.</p> <h2 id="examples"><a href="#examples" aria-hidden="true" class="header-anchor">↳</a> Examples</h2> <h3 id="externally-signing-and-sending-a-private-tx"><a href="#externally-signing-and-sending-a-private-tx" aria-hidden="true" class="header-anchor">↳</a> Externally signing and sending a private tx</h3> <p>!!!info
This is not supported by Constellation and requires Smilo v2.2.0+</p> <p><a href="https://github.com/smilofoundation/Smilo.js/blob/master/7nodes-test/deployContractViaHttp-externalSigningTemplate.js" target="_blank" rel="noopener noreferrer">Code sample<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <ol><li><code>storeRawRequest</code> to encrypt the transaction <code>data</code><div class="language-js extra-class"><pre class="language-js"><code>txnManager<span class="token punctuation">.</span><span class="token function">storeRawRequest</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">)</span>
</code></pre></div></li> <li>Replace <code>data</code> field of transaction with <code>key</code> field from <code>storeRawRequest</code> response</li> <li>Sign the transaction</li> <li>Mark the signed transaction as private with <code>setPrivate</code><div class="language-js extra-class"><pre class="language-js"><code>txnManager<span class="token punctuation">.</span><span class="token function">setPrivate</span><span class="token punctuation">(</span>signedTx<span class="token punctuation">)</span>
</code></pre></div></li> <li>Send the signed transaction to Smilo with <code>sendRawRequest</code><div class="language-js extra-class"><pre class="language-js"><code> txnManager<span class="token punctuation">.</span><span class="token function">sendRawRequest</span><span class="token punctuation">(</span>serializedTransaction<span class="token punctuation">,</span> privateFor<span class="token punctuation">)</span>
</code></pre></div></li></ol> <h3 id="other-examples"><a href="#other-examples" aria-hidden="true" class="header-anchor">↳</a> Other examples</h3> <p>The <a href="https://github.com/smilofoundation/Smilo.js/tree/master/7nodes-test" target="_blank" rel="noopener noreferrer">7nodes-test<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> directory in the Smilo.js project repo contains examples of Smilo.js usage.  These scripts can be tested with a running <a href="https://github.com/smilofoundation/Smilo-examples/tree/master/examples/7nodes" target="_blank" rel="noopener noreferrer">7nodes test network<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p></div></main> <div class="sidebar" data-v-586e078c><nav class="nav-links"><ul class="nav-ul"><li class="nav-item"><a href="/" class="nav-link">Smilo</a></li><li class="nav-item"><a href="/beginners/" class="nav-link">Beginners</a></li><li class="nav-item"><a href="/use/" class="nav-link">Use</a></li><li class="nav-item"><a href="/learn/" class="nav-link">Learn</a></li><li class="nav-item"><a href="/developers/" class="nav-link">Developers</a></li> <div class="dropdown-wrapper nav-item"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/smilo.js/RawTransactionManager.html" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/ko/" class="nav-link">Korean</a></li></ul></div></ul></nav>  <!----> </div> <footer class="footer" data-v-ca550d00 data-v-586e078c><div class="credits" data-v-ca550d00>
    Artwork by <a href="https://impermanence.co" target="_blank" data-v-ca550d00>Lili Feyerabend</a> feat. <a href="https://ilankatin.com" target="_blank" data-v-ca550d00>ilan katin</a>, <a href="https://linktr.ee/mattiacprodukt" target="_blank" data-v-ca550d00>Mattia Cuttini</a>, <a href="https://oficinastk.github.io" target="_blank" data-v-ca550d00>Oficinas TK</a>, <a href="https://xcopyart.com" target="_blank" data-v-ca550d00>XCOPY</a>.
  </div> <ul data-v-ca550d00><li data-v-ca550d00><a href="https://github.com/smilofoundation" target="_blank" data-v-ca550d00>GitHub</a></li> <li data-v-ca550d00><a href="https://twitter.com/smiloplatform" target="_blank" data-v-ca550d00>Twitter</a></li> <li data-v-ca550d00><a href="https://blog.smilo.foundation/" data-v-ca550d00>Blog</a></li> <li data-v-ca550d00><a href="/privacy-policy/" data-v-ca550d00>Privacy Policy</a></li> <li data-v-ca550d00><a href="/terms-of-use/" data-v-ca550d00>Terms of Use</a></li> <li data-v-ca550d00><a href="/cookie-policy/" data-v-ca550d00>Cookie Policy</a></li> <li data-v-ca550d00><a href="mailto:info@smilo.foundation" data-v-ca550d00>Contact</a></li></ul></footer> <a href="https://hackernoon.com/rethinking-the-identity-of-ethereumorg-l718w347l" target="_blank" data-v-586e078c><button class="announcement" data-v-586e078c>
      Read about the new artwork! <span class="accent" data-v-586e078c>→  More</span></button></a></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.1c5a03b7.js" defer></script><script src="/assets/js/3.030594d3.js" defer></script><script src="/assets/js/127.25ff388a.js" defer></script>
  </body>
</html>
