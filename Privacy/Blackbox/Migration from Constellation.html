<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Migration Utilities | Smilo</title>
    <meta name="description" content="">
    <meta/ name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,maximum-scale=1"></meta/>
  <link rel="icon" type="image/png" href="/favicon.png">
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="smilo.foundation">
  <meta property="og:url" content="https://smilo.foundation">
  <meta property="og:image" content="https://smilo.foundation/og-image.png">
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:site" content="@smiloplatform">
  <meta property="twitter:creator" content="@smiloplatform">
  <meta property="twitter:image" content="https://smilo.foundation/og-image-twitter.png">
    <link rel="preload" href="/assets/css/0.styles.77284882.css" as="style"><link rel="preload" href="/assets/js/app.1c5a03b7.js" as="script"><link rel="preload" href="/assets/js/3.030594d3.js" as="script"><link rel="preload" href="/assets/js/67.997e57cb.js" as="script"><link rel="prefetch" href="/assets/js/10.6e3e9273.js"><link rel="prefetch" href="/assets/js/100.54f82e92.js"><link rel="prefetch" href="/assets/js/101.0d7e4727.js"><link rel="prefetch" href="/assets/js/102.e09888c2.js"><link rel="prefetch" href="/assets/js/103.12c4db4a.js"><link rel="prefetch" href="/assets/js/104.917d85b3.js"><link rel="prefetch" href="/assets/js/105.2c8a97c2.js"><link rel="prefetch" href="/assets/js/106.137429f1.js"><link rel="prefetch" href="/assets/js/107.3dd3c2b0.js"><link rel="prefetch" href="/assets/js/108.ae0d09f1.js"><link rel="prefetch" href="/assets/js/109.05199ced.js"><link rel="prefetch" href="/assets/js/11.f4ce1d53.js"><link rel="prefetch" href="/assets/js/110.72857918.js"><link rel="prefetch" href="/assets/js/111.5c9c5ec1.js"><link rel="prefetch" href="/assets/js/112.4b4aa971.js"><link rel="prefetch" href="/assets/js/113.467b4f39.js"><link rel="prefetch" href="/assets/js/114.e37bc94a.js"><link rel="prefetch" href="/assets/js/115.e2033c8c.js"><link rel="prefetch" href="/assets/js/116.0f3bb3de.js"><link rel="prefetch" href="/assets/js/117.97f66c3d.js"><link rel="prefetch" href="/assets/js/118.61cc124c.js"><link rel="prefetch" href="/assets/js/119.70620c50.js"><link rel="prefetch" href="/assets/js/12.068e04f8.js"><link rel="prefetch" href="/assets/js/120.43a34ff2.js"><link rel="prefetch" href="/assets/js/121.80ec60ad.js"><link rel="prefetch" href="/assets/js/122.f38284d1.js"><link rel="prefetch" href="/assets/js/123.1dc518a3.js"><link rel="prefetch" href="/assets/js/124.5765d2e5.js"><link rel="prefetch" href="/assets/js/125.c734c24f.js"><link rel="prefetch" href="/assets/js/126.79b78b84.js"><link rel="prefetch" href="/assets/js/127.25ff388a.js"><link rel="prefetch" href="/assets/js/128.1496ac92.js"><link rel="prefetch" href="/assets/js/129.4e04e6cc.js"><link rel="prefetch" href="/assets/js/13.bda859e5.js"><link rel="prefetch" href="/assets/js/130.f107b701.js"><link rel="prefetch" href="/assets/js/131.08b783f2.js"><link rel="prefetch" href="/assets/js/14.2a400896.js"><link rel="prefetch" href="/assets/js/15.295d62fc.js"><link rel="prefetch" href="/assets/js/16.652a89b0.js"><link rel="prefetch" href="/assets/js/17.3be5eda0.js"><link rel="prefetch" href="/assets/js/18.32454e69.js"><link rel="prefetch" href="/assets/js/19.a08feb93.js"><link rel="prefetch" href="/assets/js/2.4b1d4bf3.js"><link rel="prefetch" href="/assets/js/20.34e166bb.js"><link rel="prefetch" href="/assets/js/21.1d2ef408.js"><link rel="prefetch" href="/assets/js/22.2a6cd144.js"><link rel="prefetch" href="/assets/js/23.5adcd431.js"><link rel="prefetch" href="/assets/js/24.9bccf9d1.js"><link rel="prefetch" href="/assets/js/25.d8fd4102.js"><link rel="prefetch" href="/assets/js/26.40635db2.js"><link rel="prefetch" href="/assets/js/27.9a5f2d44.js"><link rel="prefetch" href="/assets/js/28.2d385e7d.js"><link rel="prefetch" href="/assets/js/29.da082ef6.js"><link rel="prefetch" href="/assets/js/30.73aec03b.js"><link rel="prefetch" href="/assets/js/31.f86eee3a.js"><link rel="prefetch" href="/assets/js/32.46e321e1.js"><link rel="prefetch" href="/assets/js/33.e63e33f3.js"><link rel="prefetch" href="/assets/js/34.1d8e044f.js"><link rel="prefetch" href="/assets/js/35.af094489.js"><link rel="prefetch" href="/assets/js/36.fd9805c3.js"><link rel="prefetch" href="/assets/js/37.7a620d2c.js"><link rel="prefetch" href="/assets/js/38.eac140f8.js"><link rel="prefetch" href="/assets/js/39.3a26a316.js"><link rel="prefetch" href="/assets/js/4.9ea4066c.js"><link rel="prefetch" href="/assets/js/40.c0974fab.js"><link rel="prefetch" href="/assets/js/41.62cd62ac.js"><link rel="prefetch" href="/assets/js/42.20944c6a.js"><link rel="prefetch" href="/assets/js/43.e88d32e5.js"><link rel="prefetch" href="/assets/js/44.9d1312b3.js"><link rel="prefetch" href="/assets/js/45.e68f16da.js"><link rel="prefetch" href="/assets/js/46.20ba1095.js"><link rel="prefetch" href="/assets/js/47.37709ee2.js"><link rel="prefetch" href="/assets/js/48.d96ab555.js"><link rel="prefetch" href="/assets/js/49.59fb3a5d.js"><link rel="prefetch" href="/assets/js/5.9c269fae.js"><link rel="prefetch" href="/assets/js/50.dd2320c1.js"><link rel="prefetch" href="/assets/js/51.99326924.js"><link rel="prefetch" href="/assets/js/52.2f8bdcae.js"><link rel="prefetch" href="/assets/js/53.b65c9b3b.js"><link rel="prefetch" href="/assets/js/54.8f1c1e12.js"><link rel="prefetch" href="/assets/js/55.abe1f4b6.js"><link rel="prefetch" href="/assets/js/56.1b79c9a4.js"><link rel="prefetch" href="/assets/js/57.97bf7386.js"><link rel="prefetch" href="/assets/js/58.eab2d512.js"><link rel="prefetch" href="/assets/js/59.dc4064e5.js"><link rel="prefetch" href="/assets/js/6.530b08db.js"><link rel="prefetch" href="/assets/js/60.6c9bd626.js"><link rel="prefetch" href="/assets/js/61.7d3b7f84.js"><link rel="prefetch" href="/assets/js/62.0a97fcb0.js"><link rel="prefetch" href="/assets/js/63.15d50454.js"><link rel="prefetch" href="/assets/js/64.9fe77f7e.js"><link rel="prefetch" href="/assets/js/65.d0f3dc77.js"><link rel="prefetch" href="/assets/js/66.75f6f323.js"><link rel="prefetch" href="/assets/js/68.c627100e.js"><link rel="prefetch" href="/assets/js/69.1757e396.js"><link rel="prefetch" href="/assets/js/7.393450db.js"><link rel="prefetch" href="/assets/js/70.4fead485.js"><link rel="prefetch" href="/assets/js/71.9d601385.js"><link rel="prefetch" href="/assets/js/72.df61f604.js"><link rel="prefetch" href="/assets/js/73.1ba6adec.js"><link rel="prefetch" href="/assets/js/74.dae5c946.js"><link rel="prefetch" href="/assets/js/75.ed1750af.js"><link rel="prefetch" href="/assets/js/76.23271b77.js"><link rel="prefetch" href="/assets/js/77.8f47131e.js"><link rel="prefetch" href="/assets/js/78.49a99228.js"><link rel="prefetch" href="/assets/js/79.66c05d68.js"><link rel="prefetch" href="/assets/js/8.afe1cb0f.js"><link rel="prefetch" href="/assets/js/80.14ebffb1.js"><link rel="prefetch" href="/assets/js/81.f69d7b2b.js"><link rel="prefetch" href="/assets/js/82.79ac4d75.js"><link rel="prefetch" href="/assets/js/83.5551e100.js"><link rel="prefetch" href="/assets/js/84.9d9dd0e5.js"><link rel="prefetch" href="/assets/js/85.41e7de0a.js"><link rel="prefetch" href="/assets/js/86.5ada016f.js"><link rel="prefetch" href="/assets/js/87.5cf495b9.js"><link rel="prefetch" href="/assets/js/88.2ac2cd3b.js"><link rel="prefetch" href="/assets/js/89.7816c1f3.js"><link rel="prefetch" href="/assets/js/9.828672e1.js"><link rel="prefetch" href="/assets/js/90.c5ba453d.js"><link rel="prefetch" href="/assets/js/91.257808f3.js"><link rel="prefetch" href="/assets/js/92.0425b893.js"><link rel="prefetch" href="/assets/js/93.caafd925.js"><link rel="prefetch" href="/assets/js/94.190ec2a0.js"><link rel="prefetch" href="/assets/js/95.3fbee9bb.js"><link rel="prefetch" href="/assets/js/96.ced1da5b.js"><link rel="prefetch" href="/assets/js/97.b518b74f.js"><link rel="prefetch" href="/assets/js/98.09a32c0b.js"><link rel="prefetch" href="/assets/js/99.503bd021.js">
    <link rel="stylesheet" href="/assets/css/0.styles.77284882.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="wrapper" data-v-586e078c><header class="header-right flex" data-v-6f1c53dc data-v-586e078c><div class="flex" data-v-6f1c53dc><div class="sidebar-button" data-v-6f1c53dc><svg width="25px" height="20px" viewBox="0 0 25 20" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" class="icon"><title>Hamburger menu button</title> <g transform="translate(-22.000000, -2.000000)"><g transform="translate(22.000000, 2.545974)"><path d="M24.7714844,0.5 L0,0.5"></path> <path d="M24.7714844,9.72701303 L0,9.72701303"></path> <path d="M24.7714844,18.9540261 L0,18.9540261"></path></g></g></svg> <a href="/" class="home-link router-link-active"><span class="site-name">Smilo</span></a></div> <a href="/" class="router-link-active" data-v-6f1c53dc><img src="/assets/img/ethereum-logo-wireframe.8c2f2894.png" alt="Smilo Logo" class="header-logo sm-hide" data-v-6f1c53dc></a> <nav class="nav-links sm-hide" data-v-6f1c53dc><ul class="nav-ul"><li class="nav-item"><a href="/" class="nav-link">Smilo</a></li><li class="nav-item"><a href="/beginners/" class="nav-link">Beginners</a></li><li class="nav-item"><a href="/use/" class="nav-link">Use</a></li><li class="nav-item"><a href="/learn/" class="nav-link">Learn</a></li><li class="nav-item"><a href="/developers/" class="nav-link">Developers</a></li> <!----></ul></nav></div> <div class="menu inline flex flex-center" data-v-6f1c53dc><div class="search-box" data-v-6f1c53dc><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <a href="https://github.com/smilofoundation/smilo-foundation-website" target="_blank" title="Fork This Page (Github)" data-v-6f1c53dc><img alt="Github" src="/assets/img/icon-github.3720c649.svg" class="hide-dark" data-v-6f1c53dc> <img alt="Github" src="/assets/img/icon-github-white.e05d488b.svg" class="show-dark" data-v-6f1c53dc></a> <span class="pointer view-mode" data-v-6f1c53dc><img alt="Switch to Dark Mode" src="/assets/img/icon-sun.f0087fa4.svg" class="hide-dark" data-v-6f1c53dc> <img alt="Switch to Light Mode" src="/assets/img/icon-moon.0d522939.svg" class="show-dark" data-v-6f1c53dc></span> <div class="dropdown-wrapper sm-hide" data-v-6f1c53dc><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Privacy/Blackbox/Migration from Constellation.html" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/ko/" class="nav-link">Korean</a></li></ul></div></div></header> <!----> <main class="page" data-v-586e078c><div class="content__default" data-v-586e078c><h2 id="migration-utilities"><a href="#migration-utilities" aria-hidden="true" class="header-anchor">↳</a> Migration Utilities</h2> <p>Two utilities are included to help with migrating existing Constellation configurations and datastores for use with Blackbox.  These utilites are included in the Blackbox project and are available for use after building Blackbox with Maven.</p> <p>A full migration workflow would be as follows:</p> <ol><li>Shut down the Constellation/Smilo nodes</li> <li>Perform <a href="#data-migration">database migration</a></li> <li>Perform <a href="#configuration-migration">configuration migration</a></li> <li>Start Blackbox/Smilo nodes</li></ol> <h2 id="data-migration"><a href="#data-migration" aria-hidden="true" class="header-anchor">↳</a> Data Migration</h2> <p>This utility migrates a Constellation datastore (BerkeleyDB or directory/file storage) to a Blackbox compatible one (H2, SQLITE).  By default Blackbox uses an H2 database, however alternatives can be configured.  Refer <a href="https://github.com/smilofoundation/Blackbox/tree/master/ddls/create-table" target="_blank" rel="noopener noreferrer">DDLs<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for help with defining with other databases.</p> <p>To make running the utility commands simpler, you can first create an <code>alias</code>:</p> <div class="language- extra-class"><pre class="language-text"><code>alias Blackbox-data-migration=&quot;java -jar /path/to/Blackbox/data-migration/target/data-migration-${version}-cli.jar&quot;
</code></pre></div><p>CLI help can be accessed by running:</p> <div class="language- extra-class"><pre class="language-text"><code>Blackbox-data-migration help
usage: Blackbox-data-migration
-exporttype &lt;TYPE&gt;   Export DB type i.e. h2, sqlite
-inputpath &lt;PATH&gt;    Path to input file or directory
-outputfile &lt;PATH&gt;   Path to output file
-storetype &lt;TYPE&gt;    Store type i.e. bdb, dir
-dbuser              Set a username on the migrated database (only applies to H2)
-dbpass              Set a password for the specified user (only applies to H2)
</code></pre></div><h4 id="migrating-berkeleydb-bdb"><a href="#migrating-berkeleydb-bdb" aria-hidden="true" class="header-anchor">↳</a> Migrating BerkeleyDB (bdb)</h4> <p>To migrate a BerkeleyDB (bdb) database for use with Blackbox you must first export your existing store using <code>db_dump</code>:</p> <div class="language- extra-class"><pre class="language-text"><code>db_dump -f exported.txt c1/cn§.db/payload.db
</code></pre></div><p>Then run the following command to perform the migration:</p> <div class="language- extra-class"><pre class="language-text"><code>Blackbox-data-migration -storetype bdb -inputpath exported.txt -dbuser &lt;username&gt; -dbpass &lt;password&gt; -outputfile &lt;PATH&gt; -exporttype &lt;TYPE&gt;
</code></pre></div><h4 id="migrating-directory-file-dir-storage"><a href="#migrating-directory-file-dir-storage" aria-hidden="true" class="header-anchor">↳</a> Migrating Directory/File (dir) storage</h4> <p>For dir storage:</p> <div class="language- extra-class"><pre class="language-text"><code>Blackbox-data-migration -storetype dir -inputpath /path/to/dir -dbuser &lt;username&gt; -dbpass &lt;password&gt; -outputfile &lt;PATH&gt; -exporttype &lt;TYPE&gt;
</code></pre></div><h3 id="output-types"><a href="#output-types" aria-hidden="true" class="header-anchor">↳</a> Output types</h3> <p>To use H2 as the output storage, specify:</p> <div class="language- extra-class"><pre class="language-text"><code>-exporttype h2 -outputfile /path/to/h2database
</code></pre></div><p>To use SQLite as the output storage, specify:</p> <div class="language- extra-class"><pre class="language-text"><code>-exporttype sqlite -outputfile /path/to/sqlitedb
</code></pre></div><h4 id="database-usernames-and-passwords"><a href="#database-usernames-and-passwords" aria-hidden="true" class="header-anchor">↳</a> Database usernames and passwords</h4> <p>If you want to set a username and password on the migrated database, you must specify this using the following options:</p> <div class="language- extra-class"><pre class="language-text"><code>-dbuser &lt;username&gt; -dbpass &lt;password&gt;
</code></pre></div><p>If you do not wish to set a username and password on the migrated database, you must explicitly say so by specifying the arguments without parameters, i.e.</p> <div class="language- extra-class"><pre class="language-text"><code>-dbuser -dbpass
</code></pre></div><p>Note also that even though SQLite does not have the concept of usernames and passwords, you must still specify at least the empty configuration.</p> <h4 id="after-migration"><a href="#after-migration" aria-hidden="true" class="header-anchor">↳</a> After migration</h4> <p>The output file should then be placed in a location of your choosing that corresponds to the location specified in the configuration file (without any file extension), i.e.</p> <div class="language- extra-class"><pre class="language-text"><code>&quot;jdbc&quot;: {
    &quot;url&quot;: &quot;jdbc:h2:./c1/migratedfile;MODE=Oracle;TRACE_LEVEL_SYSTEM_OUT=0&quot;
}
</code></pre></div><p>Note: the migrated database is migrated without user credentials, so if using the file directly then the username and password should not be specified in the configuration.</p> <p>The Constellation files are no longer used, and can be cleaned up or left alone.</p> <h2 id="configuration-migration"><a href="#configuration-migration" aria-hidden="true" class="header-anchor">↳</a> Configuration Migration</h2> <p>This utility will generate a Blackbox compatible <code>.json</code> format configuration file from an existing Constellation <code>.toml</code> configuration file.  The <code>.json</code> file will be saved locally to be used when running Blackbox.  Individual configuration parameters can be overridden during the migration process if required.</p> <p>To make running the utility commands simpler, you can first create an <code>alias</code>:</p> <div class="language- extra-class"><pre class="language-text"><code>alias Blackbox-config-migration=&quot;java -jar /path/to/Blackbox/config-migration/target/config-migration-${version}-cli.jar&quot;
</code></pre></div><p>Most of the Constellation configuration command line parameters are supported.  For details of the Constellation configuration see the <a href="../../Constellation/Constellation">Constellation documentation</a>.</p> <p>To see the CLI help which provides details on overriding specific configuration items from a <code>.toml</code> file, run:</p> <div class="language- extra-class"><pre class="language-text"><code>Blackbox-config-migration help
</code></pre></div><p>To migrate a <code>.toml</code> file to <code>.json</code> with no overrides, run:</p> <div class="language- extra-class"><pre class="language-text"><code>Blackbox-config-migration --tomlfile=&quot;/path/to/constellation-config.toml&quot;
</code></pre></div><p>By default, the generated <code>.json</code> config will be printed to the console and saved to <code>./Blackbox-config.json</code>.  To save to another location/with a different filename use the <code>--outputfile &lt;PATH&gt;</code> CLI option.</p> <h4 id="note-about-ipwhitelist"><a href="#note-about-ipwhitelist" aria-hidden="true" class="header-anchor">↳</a> Note about <code>ipwhitelist</code></h4> <p>Unlike Constellation, Blackbox does not use a separate <code>ipwhitelist</code>.  If <code>useWhiteList</code> is set to <code>true</code> in the <code>.json</code> config then the <code>peers</code> list will be used as the whitelist.</p> <p>If <code>ipwhitelist</code> is provided in an existing <code>.toml</code> config file then this will only be used to set <code>useWhiteList: true</code>; any nodes included in this list will not be added by default to the Blackbox config.  Make sure to add any nodes that were only included in <code>ipwhitelist</code> to <code>peers</code> after using the utility.</p> <h4 id="validation"><a href="#validation" aria-hidden="true" class="header-anchor">↳</a> Validation</h4> <p>Validation is applied to the generated config. Messages will be printed to the terminal if the validation identifies issues.  For example, if a <code>hostname</code> is not provided then the following message will be printed:</p> <div class="language- extra-class"><pre class="language-text"><code>Warning: may not be null on property serverConfig.hostName
</code></pre></div><p>Any validation violations will have to be addressed before the config can be used with Blackbox.</p></div></main> <div class="sidebar" data-v-586e078c><nav class="nav-links"><ul class="nav-ul"><li class="nav-item"><a href="/" class="nav-link">Smilo</a></li><li class="nav-item"><a href="/beginners/" class="nav-link">Beginners</a></li><li class="nav-item"><a href="/use/" class="nav-link">Use</a></li><li class="nav-item"><a href="/learn/" class="nav-link">Learn</a></li><li class="nav-item"><a href="/developers/" class="nav-link">Developers</a></li> <div class="dropdown-wrapper nav-item"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Privacy/Blackbox/Migration from Constellation.html" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/ko/" class="nav-link">Korean</a></li></ul></div></ul></nav>  <!----> </div> <footer class="footer" data-v-ca550d00 data-v-586e078c><div class="credits" data-v-ca550d00>
    Artwork by <a href="https://impermanence.co" target="_blank" data-v-ca550d00>Lili Feyerabend</a> feat. <a href="https://ilankatin.com" target="_blank" data-v-ca550d00>ilan katin</a>, <a href="https://linktr.ee/mattiacprodukt" target="_blank" data-v-ca550d00>Mattia Cuttini</a>, <a href="https://oficinastk.github.io" target="_blank" data-v-ca550d00>Oficinas TK</a>, <a href="https://xcopyart.com" target="_blank" data-v-ca550d00>XCOPY</a>.
  </div> <ul data-v-ca550d00><li data-v-ca550d00><a href="https://github.com/smilofoundation" target="_blank" data-v-ca550d00>GitHub</a></li> <li data-v-ca550d00><a href="https://twitter.com/smiloplatform" target="_blank" data-v-ca550d00>Twitter</a></li> <li data-v-ca550d00><a href="https://blog.smilo.foundation/" data-v-ca550d00>Blog</a></li> <li data-v-ca550d00><a href="/privacy-policy/" data-v-ca550d00>Privacy Policy</a></li> <li data-v-ca550d00><a href="/terms-of-use/" data-v-ca550d00>Terms of Use</a></li> <li data-v-ca550d00><a href="/cookie-policy/" data-v-ca550d00>Cookie Policy</a></li> <li data-v-ca550d00><a href="mailto:info@smilo.foundation" data-v-ca550d00>Contact</a></li></ul></footer> <a href="https://hackernoon.com/rethinking-the-identity-of-ethereumorg-l718w347l" target="_blank" data-v-586e078c><button class="announcement" data-v-586e078c>
      Read about the new artwork! <span class="accent" data-v-586e078c>→  More</span></button></a></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.1c5a03b7.js" defer></script><script src="/assets/js/3.030594d3.js" defer></script><script src="/assets/js/67.997e57cb.js" defer></script>
  </body>
</html>
