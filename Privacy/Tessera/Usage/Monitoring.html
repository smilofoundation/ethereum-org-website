<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Smilo</title>
    <meta name="description" content="">
    <meta/ name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,maximum-scale=1"></meta/>
  <link rel="icon" type="image/png" href="/favicon.png">
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="smilo.foundation">
  <meta property="og:url" content="https://smilo.foundation">
  <meta property="og:image" content="https://smilo.foundation/og-image.png">
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:site" content="@smiloplatform">
  <meta property="twitter:creator" content="@smiloplatform">
  <meta property="twitter:image" content="https://smilo.foundation/og-image-twitter.png">
    <link rel="preload" href="/assets/css/0.styles.77284882.css" as="style"><link rel="preload" href="/assets/js/app.1c5a03b7.js" as="script"><link rel="preload" href="/assets/js/3.030594d3.js" as="script"><link rel="preload" href="/assets/js/6.530b08db.js" as="script"><link rel="prefetch" href="/assets/js/10.6e3e9273.js"><link rel="prefetch" href="/assets/js/100.54f82e92.js"><link rel="prefetch" href="/assets/js/101.0d7e4727.js"><link rel="prefetch" href="/assets/js/102.e09888c2.js"><link rel="prefetch" href="/assets/js/103.12c4db4a.js"><link rel="prefetch" href="/assets/js/104.917d85b3.js"><link rel="prefetch" href="/assets/js/105.2c8a97c2.js"><link rel="prefetch" href="/assets/js/106.137429f1.js"><link rel="prefetch" href="/assets/js/107.3dd3c2b0.js"><link rel="prefetch" href="/assets/js/108.ae0d09f1.js"><link rel="prefetch" href="/assets/js/109.05199ced.js"><link rel="prefetch" href="/assets/js/11.f4ce1d53.js"><link rel="prefetch" href="/assets/js/110.72857918.js"><link rel="prefetch" href="/assets/js/111.5c9c5ec1.js"><link rel="prefetch" href="/assets/js/112.4b4aa971.js"><link rel="prefetch" href="/assets/js/113.467b4f39.js"><link rel="prefetch" href="/assets/js/114.e37bc94a.js"><link rel="prefetch" href="/assets/js/115.e2033c8c.js"><link rel="prefetch" href="/assets/js/116.0f3bb3de.js"><link rel="prefetch" href="/assets/js/117.97f66c3d.js"><link rel="prefetch" href="/assets/js/118.61cc124c.js"><link rel="prefetch" href="/assets/js/119.70620c50.js"><link rel="prefetch" href="/assets/js/12.068e04f8.js"><link rel="prefetch" href="/assets/js/120.43a34ff2.js"><link rel="prefetch" href="/assets/js/121.80ec60ad.js"><link rel="prefetch" href="/assets/js/122.f38284d1.js"><link rel="prefetch" href="/assets/js/123.1dc518a3.js"><link rel="prefetch" href="/assets/js/124.5765d2e5.js"><link rel="prefetch" href="/assets/js/125.c734c24f.js"><link rel="prefetch" href="/assets/js/126.79b78b84.js"><link rel="prefetch" href="/assets/js/127.25ff388a.js"><link rel="prefetch" href="/assets/js/128.1496ac92.js"><link rel="prefetch" href="/assets/js/129.4e04e6cc.js"><link rel="prefetch" href="/assets/js/13.bda859e5.js"><link rel="prefetch" href="/assets/js/130.f107b701.js"><link rel="prefetch" href="/assets/js/131.08b783f2.js"><link rel="prefetch" href="/assets/js/14.2a400896.js"><link rel="prefetch" href="/assets/js/15.295d62fc.js"><link rel="prefetch" href="/assets/js/16.652a89b0.js"><link rel="prefetch" href="/assets/js/17.3be5eda0.js"><link rel="prefetch" href="/assets/js/18.32454e69.js"><link rel="prefetch" href="/assets/js/19.a08feb93.js"><link rel="prefetch" href="/assets/js/2.4b1d4bf3.js"><link rel="prefetch" href="/assets/js/20.34e166bb.js"><link rel="prefetch" href="/assets/js/21.1d2ef408.js"><link rel="prefetch" href="/assets/js/22.2a6cd144.js"><link rel="prefetch" href="/assets/js/23.5adcd431.js"><link rel="prefetch" href="/assets/js/24.9bccf9d1.js"><link rel="prefetch" href="/assets/js/25.d8fd4102.js"><link rel="prefetch" href="/assets/js/26.40635db2.js"><link rel="prefetch" href="/assets/js/27.9a5f2d44.js"><link rel="prefetch" href="/assets/js/28.2d385e7d.js"><link rel="prefetch" href="/assets/js/29.da082ef6.js"><link rel="prefetch" href="/assets/js/30.73aec03b.js"><link rel="prefetch" href="/assets/js/31.f86eee3a.js"><link rel="prefetch" href="/assets/js/32.46e321e1.js"><link rel="prefetch" href="/assets/js/33.e63e33f3.js"><link rel="prefetch" href="/assets/js/34.1d8e044f.js"><link rel="prefetch" href="/assets/js/35.af094489.js"><link rel="prefetch" href="/assets/js/36.fd9805c3.js"><link rel="prefetch" href="/assets/js/37.7a620d2c.js"><link rel="prefetch" href="/assets/js/38.eac140f8.js"><link rel="prefetch" href="/assets/js/39.3a26a316.js"><link rel="prefetch" href="/assets/js/4.9ea4066c.js"><link rel="prefetch" href="/assets/js/40.c0974fab.js"><link rel="prefetch" href="/assets/js/41.62cd62ac.js"><link rel="prefetch" href="/assets/js/42.20944c6a.js"><link rel="prefetch" href="/assets/js/43.e88d32e5.js"><link rel="prefetch" href="/assets/js/44.9d1312b3.js"><link rel="prefetch" href="/assets/js/45.e68f16da.js"><link rel="prefetch" href="/assets/js/46.20ba1095.js"><link rel="prefetch" href="/assets/js/47.37709ee2.js"><link rel="prefetch" href="/assets/js/48.d96ab555.js"><link rel="prefetch" href="/assets/js/49.59fb3a5d.js"><link rel="prefetch" href="/assets/js/5.9c269fae.js"><link rel="prefetch" href="/assets/js/50.dd2320c1.js"><link rel="prefetch" href="/assets/js/51.99326924.js"><link rel="prefetch" href="/assets/js/52.2f8bdcae.js"><link rel="prefetch" href="/assets/js/53.b65c9b3b.js"><link rel="prefetch" href="/assets/js/54.8f1c1e12.js"><link rel="prefetch" href="/assets/js/55.abe1f4b6.js"><link rel="prefetch" href="/assets/js/56.1b79c9a4.js"><link rel="prefetch" href="/assets/js/57.97bf7386.js"><link rel="prefetch" href="/assets/js/58.eab2d512.js"><link rel="prefetch" href="/assets/js/59.dc4064e5.js"><link rel="prefetch" href="/assets/js/60.6c9bd626.js"><link rel="prefetch" href="/assets/js/61.7d3b7f84.js"><link rel="prefetch" href="/assets/js/62.0a97fcb0.js"><link rel="prefetch" href="/assets/js/63.15d50454.js"><link rel="prefetch" href="/assets/js/64.9fe77f7e.js"><link rel="prefetch" href="/assets/js/65.d0f3dc77.js"><link rel="prefetch" href="/assets/js/66.75f6f323.js"><link rel="prefetch" href="/assets/js/67.997e57cb.js"><link rel="prefetch" href="/assets/js/68.c627100e.js"><link rel="prefetch" href="/assets/js/69.1757e396.js"><link rel="prefetch" href="/assets/js/7.393450db.js"><link rel="prefetch" href="/assets/js/70.4fead485.js"><link rel="prefetch" href="/assets/js/71.9d601385.js"><link rel="prefetch" href="/assets/js/72.df61f604.js"><link rel="prefetch" href="/assets/js/73.1ba6adec.js"><link rel="prefetch" href="/assets/js/74.dae5c946.js"><link rel="prefetch" href="/assets/js/75.ed1750af.js"><link rel="prefetch" href="/assets/js/76.23271b77.js"><link rel="prefetch" href="/assets/js/77.8f47131e.js"><link rel="prefetch" href="/assets/js/78.49a99228.js"><link rel="prefetch" href="/assets/js/79.66c05d68.js"><link rel="prefetch" href="/assets/js/8.afe1cb0f.js"><link rel="prefetch" href="/assets/js/80.14ebffb1.js"><link rel="prefetch" href="/assets/js/81.f69d7b2b.js"><link rel="prefetch" href="/assets/js/82.79ac4d75.js"><link rel="prefetch" href="/assets/js/83.5551e100.js"><link rel="prefetch" href="/assets/js/84.9d9dd0e5.js"><link rel="prefetch" href="/assets/js/85.41e7de0a.js"><link rel="prefetch" href="/assets/js/86.5ada016f.js"><link rel="prefetch" href="/assets/js/87.5cf495b9.js"><link rel="prefetch" href="/assets/js/88.2ac2cd3b.js"><link rel="prefetch" href="/assets/js/89.7816c1f3.js"><link rel="prefetch" href="/assets/js/9.828672e1.js"><link rel="prefetch" href="/assets/js/90.c5ba453d.js"><link rel="prefetch" href="/assets/js/91.257808f3.js"><link rel="prefetch" href="/assets/js/92.0425b893.js"><link rel="prefetch" href="/assets/js/93.caafd925.js"><link rel="prefetch" href="/assets/js/94.190ec2a0.js"><link rel="prefetch" href="/assets/js/95.3fbee9bb.js"><link rel="prefetch" href="/assets/js/96.ced1da5b.js"><link rel="prefetch" href="/assets/js/97.b518b74f.js"><link rel="prefetch" href="/assets/js/98.09a32c0b.js"><link rel="prefetch" href="/assets/js/99.503bd021.js">
    <link rel="stylesheet" href="/assets/css/0.styles.77284882.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="wrapper" data-v-586e078c><header class="header-right flex" data-v-6f1c53dc data-v-586e078c><div class="flex" data-v-6f1c53dc><div class="sidebar-button" data-v-6f1c53dc><svg width="25px" height="20px" viewBox="0 0 25 20" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" class="icon"><title>Hamburger menu button</title> <g transform="translate(-22.000000, -2.000000)"><g transform="translate(22.000000, 2.545974)"><path d="M24.7714844,0.5 L0,0.5"></path> <path d="M24.7714844,9.72701303 L0,9.72701303"></path> <path d="M24.7714844,18.9540261 L0,18.9540261"></path></g></g></svg> <a href="/" class="home-link router-link-active"><span class="site-name">Smilo</span></a></div> <a href="/" class="router-link-active" data-v-6f1c53dc><img src="/assets/img/ethereum-logo-wireframe.8c2f2894.png" alt="Smilo Logo" class="header-logo sm-hide" data-v-6f1c53dc></a> <nav class="nav-links sm-hide" data-v-6f1c53dc><ul class="nav-ul"><li class="nav-item"><a href="/" class="nav-link">Smilo</a></li><li class="nav-item"><a href="/beginners/" class="nav-link">Beginners</a></li><li class="nav-item"><a href="/use/" class="nav-link">Use</a></li><li class="nav-item"><a href="/learn/" class="nav-link">Learn</a></li><li class="nav-item"><a href="/developers/" class="nav-link">Developers</a></li> <!----></ul></nav></div> <div class="menu inline flex flex-center" data-v-6f1c53dc><div class="search-box" data-v-6f1c53dc><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <a href="https://github.com/smilofoundation/smilo-foundation-website" target="_blank" title="Fork This Page (Github)" data-v-6f1c53dc><img alt="Github" src="/assets/img/icon-github.3720c649.svg" class="hide-dark" data-v-6f1c53dc> <img alt="Github" src="/assets/img/icon-github-white.e05d488b.svg" class="show-dark" data-v-6f1c53dc></a> <span class="pointer view-mode" data-v-6f1c53dc><img alt="Switch to Dark Mode" src="/assets/img/icon-sun.f0087fa4.svg" class="hide-dark" data-v-6f1c53dc> <img alt="Switch to Light Mode" src="/assets/img/icon-moon.0d522939.svg" class="show-dark" data-v-6f1c53dc></span> <div class="dropdown-wrapper sm-hide" data-v-6f1c53dc><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Privacy/Tessera/Usage/Monitoring.html" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/ko/" class="nav-link">Korean</a></li></ul></div></div></header> <!----> <main class="page" data-v-586e078c><div class="content__default" data-v-586e078c><p>Tessera can be used with InfluxDB and Prometheus time-series databases to record API usage metrics.  The data recorded can be visualised either by creating a custom dashboard or by using an existing dashboarding tool such as Grafana.</p> <p>In addition, Tessera logs can be searched, analyzed and monitored using Splunk.  Splunk can be set up in such a way that the logs for multiple Tessera nodes in a network are accessible from a single centralized Splunk instance.</p> <h2 id="api-metrics"><a href="#api-metrics" aria-hidden="true" class="header-anchor">↳</a> API Metrics</h2> <p>Tessera can record the following usage metrics for each endpoint of its API:</p> <ul><li>Average Response Time</li> <li>Max Response Time</li> <li>Min Response Time</li> <li>Request Count</li> <li>Requests Per Second</li></ul> <p>These metrics can be stored in an InfluxDB or Prometheus time-series database for further analysis.</p> <ul><li><a href="https://www.influxdata.com/time-series-platform/influxdb/" target="_blank" rel="noopener noreferrer">InfluxDB<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> should be used when it is preferred for metrics to be &quot;pushed&quot; from Tessera to the DB (i.e. Tessera starts a service which periodically writes the latest metrics to the DB by calling the DBs API)</li> <li><a href="https://prometheus.io/" target="_blank" rel="noopener noreferrer">Prometheus<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> should be used when it is preferred for metrics to be &quot;pulled&quot; from Tessera by the DB (i.e. Tessera exposes a <code>/metrics</code> API endpoint which the DB periodically calls to fetch the latest metrics)</li></ul> <p>Both databases integrate well with the open source dashboard editor <a href="https://grafana.com/" target="_blank" rel="noopener noreferrer">Grafana<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to allow for easy creation of dashboards to visualise the data being captured from Tessera.</p> <h3 id="using-influxdb"><a href="#using-influxdb" aria-hidden="true" class="header-anchor">↳</a> Using InfluxDB</h3> <p>See the <a href="https://docs.influxdata.com/influxdb" target="_blank" rel="noopener noreferrer">InfluxDB documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for details on how to set up an InfluxDB database ready for use with Tessera.  A summary of the steps is as follows:</p> <ol><li><a href="https://docs.influxdata.com/influxdb/v1.7/introduction/installation/" target="_blank" rel="noopener noreferrer">Install InfluxDB<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>Start the InfluxDB server<div class="language-bash extra-class"><pre class="language-bash"><code>influxd -config /path/to/influx.conf
</code></pre></div>For local development/testing the default configuration file (Linux: <code>/etc/influxdb/influxdb.conf</code>, macOS: <code>/usr/local/etc/influxdb.conf</code>), should be sufficient.  For further configuration options see <a href="https://docs.influxdata.com/influxdb/v1.7/administration/config/" target="_blank" rel="noopener noreferrer">Configuring InfluxDB<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>Connect to the InfluxDB server using the <a href="https://docs.influxdata.com/influxdb/v1.7/tools/shell/" target="_blank" rel="noopener noreferrer"><code>influx</code> CLI<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and create a new DB.  If using the default config, this is simply:<div class="language-bash extra-class"><pre class="language-bash"><code>influx
<span class="token operator">&gt;</span> CREATE DATABASE myDb
</code></pre></div></li> <li>To view data stored in the database use the <a href="https://docs.influxdata.com/influxdb/v1.7/query_language/" target="_blank" rel="noopener noreferrer">Influx Query Language<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><div class="language-bash extra-class"><pre class="language-bash"><code>influx
<span class="token operator">&gt;</span> USE myDb
<span class="token operator">&gt;</span> SHOW MEASUREMENTS
<span class="token operator">&gt;</span> SELECT * FROM <span class="token operator">&lt;</span>measurement<span class="token operator">&gt;</span>
</code></pre></div></li></ol> <p>!!! info
The InfluxDB HTTP API can be called directly as an alternative to using the <code>influx</code> CLI</p> <p>Each Tessera server type (i.e. <code>P2P</code>, <code>Q2T</code>, <code>ADMIN</code>, <code>THIRDPARTY</code>, <code>ENCLAVE</code>) can be configured to store API metrics in an InfluxDB.  These servers can be configured to store metrics to the same DB or separate ones.  Not all servers need to be configured to store metrics.</p> <p>To configure a server to use an InfluxDB, add <code>influxConfig</code> to the server config.  For example:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;serverConfigs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token property">&quot;app&quot;</span><span class="token operator">:</span><span class="token string">&quot;Q2T&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;enabled&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token property">&quot;serverAddress&quot;</span><span class="token operator">:</span><span class="token string">&quot;unix:/path/to/tm.ipc&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;communicationType&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;REST&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;influxConfig&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;serverAddress&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://localhost:8086&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// InfluxDB server address</span>
            <span class="token property">&quot;dbName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;myDb&quot;</span><span class="token punctuation">,</span>                           <span class="token comment">// InfluxDB DB name (DB must already exist)</span>
            <span class="token property">&quot;pushIntervalInSecs&quot;</span><span class="token operator">:</span> <span class="token number">15</span><span class="token punctuation">,</span>                   <span class="token comment">// How frequently Tessera will push new metrics to the DB</span>
            <span class="token property">&quot;sslConfig&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>                              <span class="token comment">// Config required if InfluxDB server is using TLS</span>
                <span class="token property">&quot;tls&quot;</span><span class="token operator">:</span> <span class="token string">&quot;STRICT&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;sslConfigType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;CLIENT_ONLY&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;clientTrustMode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;CA&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;clientTrustStore&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/path/to/truststore.jks&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;clientTrustStorePassword&quot;</span><span class="token operator">:</span> <span class="token string">&quot;password&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;clientKeyStore&quot;</span><span class="token operator">:</span> <span class="token string">&quot;path/to/truststore.jks&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;clientKeyStorePassword&quot;</span><span class="token operator">:</span> <span class="token string">&quot;password&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token property">&quot;app&quot;</span><span class="token operator">:</span><span class="token string">&quot;P2P&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;enabled&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token property">&quot;serverAddress&quot;</span><span class="token operator">:</span><span class="token string">&quot;http://localhost:9001&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;communicationType&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;REST&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;influxConfig&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;serverAddress&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:8087&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;dbName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;anotherDb&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;pushIntervalInSecs&quot;</span><span class="token operator">:</span> <span class="token number">15</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h4 id="influxdb-tls-configuration"><a href="#influxdb-tls-configuration" aria-hidden="true" class="header-anchor">↳</a> InfluxDB TLS Configuration</h4> <p>InfluxDB supports 1-way TLS.  This allows clients to validate the identity of the InfluxDB server and provides data encryption.</p> <p>See <a href="https://docs.influxdata.com/influxdb/v1.7/administration/https_setup/" target="_blank" rel="noopener noreferrer">Enabling HTTPS with InfluxDB<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for details on how to secure an InfluxDB server with TLS.  A summary of the steps is as follows:</p> <ol><li>Obtain a CA/self-signed certificate and key (either as separate <code>.crt</code> and <code>.key</code> files or as a combined <code>.pem</code> file)</li> <li>Enable HTTPS in <code>influx.conf</code>:<div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># Determines whether HTTPS is enabled.</span>
https-enabled <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token comment"># The SSL certificate to use when HTTPS is enabled.</span>
https-certificate <span class="token operator">=</span> <span class="token string">&quot;/path/to/certAndKey.pem&quot;</span>
<span class="token comment"># Use a separate private key location.</span>
https-private-key <span class="token operator">=</span> <span class="token string">&quot;/path/to/certAndKey.pem&quot;</span>
</code></pre></div></li> <li>Restart the InfluxDB server to apply the config changes</li></ol> <p>To allow Tessera to communicate with a TLS-secured InfluxDB, <code>sslConfig</code> must be provided.  To configure Tessera as the client in 1-way TLS:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;sslConfig&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;tls&quot;</span><span class="token operator">:</span> <span class="token string">&quot;STRICT&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;sslConfigType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;CLIENT_ONLY&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;clientTrustMode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;CA&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;clientTrustStore&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/path/to/truststore.jks&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;clientTrustStorePassword&quot;</span><span class="token operator">:</span> <span class="token string">&quot;password&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;clientKeyStore&quot;</span><span class="token operator">:</span> <span class="token string">&quot;path/to/truststore.jks&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;clientKeyStorePassword&quot;</span><span class="token operator">:</span> <span class="token string">&quot;password&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;environmentVariablePrefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;INFLUX&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>where <code>truststore.jks</code> is a Java KeyStore format file containing the trusted certificates for the Tessera client (e.g. the certificate of the CA used to create the InfluxDB certificate).</p> <p>If securing the keystore with a password this password should be provided.  Passwords can be provided either in the config (e.g. <code>clientTrustStorePassword</code>) or as environment variables (using <code>environmentVariablePrefix</code> and setting <code>&lt;PREFIX&gt;_TESSERA_CLIENT_TRUSTSTORE_PWD</code>).  The <a href="../../Configuration/TLS">TLS Config</a> documentation explains this in more detail.</p> <p>As Tessera expects 2-way TLS, a <code>.jks</code> file for the <code>clientKeyStore</code> must also be provided.  This will not be used so can simply be set as the truststore.</p> <h3 id="using-prometheus"><a href="#using-prometheus" aria-hidden="true" class="header-anchor">↳</a> Using Prometheus</h3> <p>The <a href="https://prometheus.io/docs/introduction/overview/" target="_blank" rel="noopener noreferrer">Prometheus documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> provides all the information needed to get Prometheus setup and ready to integrate with Tessera.  The <a href="https://prometheus.io/docs/introduction/first_steps/" target="_blank" rel="noopener noreferrer">Prometheus First Steps<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is a good starting point.  A summary of the steps to store Tessera metrics in a Prometheus DB are as follows:</p> <ol><li>Install Prometheus</li> <li>Create a <code>prometheus.yml</code> configuration file to provide Prometheus with the necessary information to pull metrics from Tessera.  A simple Prometheus config for use with the [7nodes example network](../../../Getting Started/7Nodes) is:<div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">global</span><span class="token punctuation">:</span>
  <span class="token key atrule">scrape_interval</span><span class="token punctuation">:</span>     15s
  <span class="token key atrule">evaluation_interval</span><span class="token punctuation">:</span> 15s 
<span class="token key atrule">scrape_configs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">job_name</span><span class="token punctuation">:</span> tessera<span class="token punctuation">-</span>7nodes
    <span class="token key atrule">static_configs</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">targets</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'localhost:9001'</span><span class="token punctuation">,</span> <span class="token string">'localhost:9002'</span><span class="token punctuation">,</span> <span class="token string">'localhost:9003'</span><span class="token punctuation">,</span> <span class="token string">'localhost:9004'</span><span class="token punctuation">,</span> <span class="token string">'localhost:9005'</span><span class="token punctuation">,</span> <span class="token string">'localhost:9006'</span><span class="token punctuation">,</span> <span class="token string">'localhost:9007'</span><span class="token punctuation">]</span>
</code></pre></div></li> <li>Start Tessera.  As Tessera always exposes the <code>metrics</code> endpoint no additional configuration of Tessera is required</li> <li>Start Prometheus<div class="language-bash extra-class"><pre class="language-bash"><code>prometheus --config.file<span class="token operator">=</span>prometheus.yml
</code></pre></div></li> <li>To view data stored in the database, access the Prometheus UI (by default <code>localhost:9090</code>, this address can be changed in <code>prometheus.yml</code>) and use the <a href="https://prometheus.io/docs/prometheus/latest/querying/basics/" target="_blank" rel="noopener noreferrer">Prometheus Query Language<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ol> <h3 id="creating-a-grafana-dashboard"><a href="#creating-a-grafana-dashboard" aria-hidden="true" class="header-anchor">↳</a> Creating a Grafana dashboard</h3> <p>Grafana can be used to create dashboards from data stored in InfluxDB or Prometheus databases.  See the <a href="http://docs.grafana.org/" target="_blank" rel="noopener noreferrer">Grafana documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and <a href="https://grafana.com/docs/guides/getting_started/" target="_blank" rel="noopener noreferrer">Grafana Getting Started<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for details on how to set up a Grafana instance and integrate it with databases.  A summary of the steps is as follows:</p> <ol><li><a href="https://grafana.com/docs/" target="_blank" rel="noopener noreferrer">Install and start Grafana<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> as described for your OS (if using the default config, Grafana will start on port <code>3000</code> and require login/password <code>admin/admin</code> to access the dashboard)</li> <li>Create a Data Source to provide the necessary details to connect to the database</li> <li>Create a new Dashboard</li> <li>Add panels to the dashboard.  Panels are the graphs, tables, statistics etc. that make up a dashboard. The New Panel wizard allows the components of the panel to be configured:
<ul><li>Queries: Details the query to use retrieve data from the datasource, see the following links for info on using the Query Editor for <a href="https://grafana.com/docs/features/datasources/influxdb/" target="_blank" rel="noopener noreferrer">InfluxDB<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and <a href="https://grafana.com/docs/features/datasources/prometheus/" target="_blank" rel="noopener noreferrer">Prometheus<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>Visualization: How to present the data queried, including panel type, axis headings etc.</li></ul></li></ol> <h4 id="example-dashboard"><a href="#example-dashboard" aria-hidden="true" class="header-anchor">↳</a> Example dashboard</h4> <p><a href="../../../images/tessera/monitoring/example-grafana-dashboard.png"><img src="/assets/img/example-grafana-dashboard.b4a1b8e9.png" alt="example-grafana-dashboard.png"></a></p> <p>To create this dashboard, a [7nodes example network](../../../Getting Started/7Nodes) was started, with each Tessera node configured to store its <code>P2P</code> and <code>Q2T</code> metrics to the same InfluxDB.  Several runs of the Smilo Acceptance Tests were run against this network to simulate network activity.</p> <p>As can be seen in the top-right corner, the dashboard was set to only show data collected in the past 15 mins.</p> <p>To create a dashboard similar to this:</p> <ol><li><p>Create an InfluxDB datasource within Grafana:</p> <ol><li>Hover over the cog icon in the left sidebar</li> <li>Data Sources</li> <li>Add data source</li> <li>Select the type of DB to connect to (e.g. InfluxDB or Prometheus)</li> <li>Fill out the form to provide all necessary DB connection information, e.g.:
<a href="../../../images/tessera/monitoring/grafana-influxdb-datasource.png"><img src="/assets/img/grafana-influxdb-datasource.f01bbeb6.png" alt="grafana-influxdb-datasource.png"></a></li></ol></li> <li><p>Create a new dashboard</p> <ol><li>Hover over the plus icon in the left sidebar</li> <li>Dashboard</li> <li>Add Query to configure the first panel</li> <li>Add Panel in the top-right to add additional panels
<a href="../../../images/tessera/monitoring/grafana-new-dashboard.png"><img src="/assets/img/grafana-new-dashboard.4d4e6824.png" alt="grafana-new-dashboard.png"></a></li></ol> <p>!!! note
For each of the following examples, additional options such as titles, axis labels and formatting can be configured by navigating the menus in the left-hand sidebar</p> <pre><code> [![grafana-panel-sidebar.png](../../../images/tessera/monitoring/grafana-panel-sidebar.png)](../../../images/tessera/monitoring/grafana-panel-sidebar.png)
</code></pre></li> <li><p>Create <em>sendRaw requests</em> panel</p> <ol><li>Select the correct datasource from the <em>Queries to</em> dropdown list</li> <li>Construct the query as shown in the below image.  This retrieves the data for the <code>sendraw</code> API from the InfluxDB, finds the sum of the <code>RequestCount</code> for this data (i.e. the total number of requests) and groups by <code>instance</code> (i.e. each Tessera node).  <code>time($_interval)</code> automatically scales the graph resolution for the time range and graph width.
<a href="../../../images/tessera/monitoring/grafana-send-raw-query.png"><img src="/assets/img/grafana-send-raw-query.282f517b.png" alt="grafana-send-raw-query.png"></a></li></ol> <p>This panel shows the number of private payloads sent to Tessera using the <code>sendraw</code> API over time.</p></li> <li><p>Create <em>receiveRaw requests</em> panel</p> <ol><li>Select the correct datasource from the <em>Queries to</em> dropdown list</li> <li>Construct the query as shown in the below image.  This retrieves the data for the <code>receiveraw</code> API from the InfluxDB, finds the sum of the <code>RequestCount</code> for this data (i.e. the total number of requests) and groups by <code>instance</code> (i.e. each Tessera node).  <code>time($_interval)</code> automatically scales the graph resolution for the time range and graph width.
<a href="../../../images/tessera/monitoring/grafana-receive-raw-query.png"><img src="/assets/img/grafana-receive-raw-query.c64314e8.png" alt="grafana-receive-raw-query.png"></a></li></ol> <p>This panel shows the number of private payloads retrieved from Tessera using the <code>receiveraw</code> API over time.</p></li> <li><p>Create <em>partyinfo request rate (Tessera network health)</em> panel</p> <ol><li>Select the correct datasource from the <em>Queries to</em> dropdown list</li> <li>Construct the query as shown in the below image.  This retrieves the data for the <code>partyinfo</code> API from the InfluxDB, finds the non-negative derivative of the <code>RequestCount</code> for this data and groups by <code>instance</code> (i.e. each Tessera node).  <code>non_negative_derivative(1s)</code> calculates the per second change in <code>RequestCount</code> and ignores negative values that will occur if a node is stopped and restarted.
<a href="../../../images/tessera/monitoring/grafana-partyinfo-rate.png"><img src="/assets/img/grafana-partyinfo-rate.8741233a.png" alt="grafana-partyinfo-rate.png"></a></li></ol> <p>This panel shows the rate of POST requests per second to <code>partyinfo</code>. For this network of 7 healthy nodes, this rate fluctuates between 5.5 and 6.5 requests/sec.  At approx 09:37 node 1 was killed and the partyinfo rate across all nodes immediately drops.  This is because they are no longer receiving requests to their <code>partyinfo</code> API from node 1.  At 09:41 node 1 is restarted and the rates return to their original values.</p> <p>This metric can be used as an indirect method of monitoring the health of the network.  Using some of the more advanced InfluxDB query options available in Grafana and the other metrics measurements available it may be possible to make this result more explicit.</p> <p><a href="https://grafana.com/docs/alerting/notifications/" target="_blank" rel="noopener noreferrer">Alerts and rules<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> can be configured to determine when a node has disconnected and send notifications to pre-configured channels (e.g. Slack, email, etc.).</p></li> <li><p>Create <em>sendRaw rate</em> panel</p> <ol><li>Select the correct datasource from the <em>Queries to</em> dropdown list</li> <li>Construct the query as shown in the below image.  This retrieves the data for the <code>sendraw</code> API from the InfluxDB, finds the sum of the <code>RequestRate</code> for this data and groups by <code>instance</code> (i.e. each Tessera node).  <code>time($_interval)</code> automatically scales the graph resolution for the time range and graph width.
<a href="../../../images/tessera/monitoring/grafana-sendraw-rate-query.png"><img src="/assets/img/grafana-sendraw-rate-query.93f958af.png" alt="grafana-sendraw-rate-query.png"></a></li></ol> <p>The POST <code>sendraw</code> API is used by Smilo whenever a private transaction is sent using the <code>eth_sendTransaction</code> or <code>personal_sendTransaction</code> API.  This panel gives a good indication of the private tx throughput in Smilo.  Note that if the <code>sendraw</code> API is called by another process, the count will not be a true representation of Smilo traffic.</p></li></ol> <h2 id="monitoring-a-tessera-network-with-splunk"><a href="#monitoring-a-tessera-network-with-splunk" aria-hidden="true" class="header-anchor">↳</a> Monitoring a Tessera network with Splunk</h2> <p>Splunk can be used to search, analyze and monitor the logs of Tessera nodes.</p> <p>To consolidate the logs from multiple Tessera nodes in a network requires setting up Splunk and Splunk Universal Forwarders.  The following pages from the Splunk documentation are a good starting point for understanding how to achieve this:</p> <ul><li><a href="http://docs.splunk.com/Documentation/Forwarder/7.1.2/Forwarder/Consolidatedatafrommultiplehosts" target="_blank" rel="noopener noreferrer">Consolidate data from multiple hosts<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://docs.splunk.com/Documentation/Splunk/7.1.2/Forwarding/EnableforwardingonaSplunkEnterpriseinstance#Set_up_the_universal_forwarder" target="_blank" rel="noopener noreferrer">Set up the Universal Forwarder<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://docs.splunk.com/Documentation/Forwarder/7.1.2/Forwarder/Configuretheuniversalforwarder" target="_blank" rel="noopener noreferrer">Configure the Universal Forwarder<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://docs.splunk.com/Documentation/Forwarder/7.1.2/Forwarder/Enableareceiver" target="_blank" rel="noopener noreferrer">Enable a receiver<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>The general steps to consolidate the logs for a Tessera network in Splunk are:</p> <ol><li>Set up a central Splunk instance if one does not already exist.  Typically this will be on a separate host to the hosts running the Tessera nodes.  This is known as the <em>Receiver</em>.</li> <li>Configure the Tessera hosts to forward their node's logs to the <em>Receiver</em> by:
<ol><li><p>Configuring the format and output location of the node's logs.  This is achieved by configuring logback (the logging framework used by Tessera) at node start-up.</p> <p>The following example XML configures logback to save Tessera's logs to a file.  See the <a href="https://logback.qos.ch/manual/configuration.html#syntax" target="_blank" rel="noopener noreferrer">Logback documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for more information on configuring logback:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>            
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>FILE<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ch.qos.logback.core.FileAppender<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>file</span><span class="token punctuation">&gt;</span></span>/path/to/file.log<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>file</span><span class="token punctuation">&gt;</span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span><span class="token punctuation">&gt;</span></span>
               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">&gt;</span></span>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">&gt;</span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">&gt;</span></span>    
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>logger</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>org.glassfish.jersey.internal.inject.Providers<span class="token punctuation">&quot;</span></span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ERROR<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>logger</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>org.hibernate.validator.internal.util.Version<span class="token punctuation">&quot;</span></span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ERROR<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>logger</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>org.hibernate.validator.internal.engine.ConfigurationImpl<span class="token punctuation">&quot;</span></span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ERROR<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>root</span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>INFO<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>FILE<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>root</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>To start Tessera with an XML configuration file:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>java -Dlogback.configurationFile<span class="token operator">=</span>/path/to/logback-config.xml -jar /path/to/tessera-app-<span class="token operator">&lt;</span>version<span class="token operator">&gt;</span>-app.jar -configfile /path/to/config.json
</code></pre></div></li> <li><p>Set up Splunk <em>Universal Forwarders</em> (lightweight Splunk clients) on each Tessera host to forward log data for their node to the <em>Receiver</em></p></li> <li><p>Set up the Splunk <em>Receiver</em> to listen and receive logging data from the <em>Universal Forwarders</em></p></li></ol></li></ol></div></main> <div class="sidebar" data-v-586e078c><nav class="nav-links"><ul class="nav-ul"><li class="nav-item"><a href="/" class="nav-link">Smilo</a></li><li class="nav-item"><a href="/beginners/" class="nav-link">Beginners</a></li><li class="nav-item"><a href="/use/" class="nav-link">Use</a></li><li class="nav-item"><a href="/learn/" class="nav-link">Learn</a></li><li class="nav-item"><a href="/developers/" class="nav-link">Developers</a></li> <div class="dropdown-wrapper nav-item"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Privacy/Tessera/Usage/Monitoring.html" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/ko/" class="nav-link">Korean</a></li></ul></div></ul></nav>  <!----> </div> <footer class="footer" data-v-ca550d00 data-v-586e078c><div class="credits" data-v-ca550d00>
    Artwork by <a href="https://impermanence.co" target="_blank" data-v-ca550d00>Lili Feyerabend</a> feat. <a href="https://ilankatin.com" target="_blank" data-v-ca550d00>ilan katin</a>, <a href="https://linktr.ee/mattiacprodukt" target="_blank" data-v-ca550d00>Mattia Cuttini</a>, <a href="https://oficinastk.github.io" target="_blank" data-v-ca550d00>Oficinas TK</a>, <a href="https://xcopyart.com" target="_blank" data-v-ca550d00>XCOPY</a>.
  </div> <ul data-v-ca550d00><li data-v-ca550d00><a href="https://github.com/smilofoundation" target="_blank" data-v-ca550d00>GitHub</a></li> <li data-v-ca550d00><a href="https://twitter.com/smiloplatform" target="_blank" data-v-ca550d00>Twitter</a></li> <li data-v-ca550d00><a href="https://blog.smilo.foundation/" data-v-ca550d00>Blog</a></li> <li data-v-ca550d00><a href="/privacy-policy/" data-v-ca550d00>Privacy Policy</a></li> <li data-v-ca550d00><a href="/terms-of-use/" data-v-ca550d00>Terms of Use</a></li> <li data-v-ca550d00><a href="/cookie-policy/" data-v-ca550d00>Cookie Policy</a></li> <li data-v-ca550d00><a href="mailto:info@smilo.foundation" data-v-ca550d00>Contact</a></li></ul></footer> <a href="https://hackernoon.com/rethinking-the-identity-of-ethereumorg-l718w347l" target="_blank" data-v-586e078c><button class="announcement" data-v-586e078c>
      Read about the new artwork! <span class="accent" data-v-586e078c>→  More</span></button></a></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.1c5a03b7.js" defer></script><script src="/assets/js/3.030594d3.js" defer></script><script src="/assets/js/6.530b08db.js" defer></script>
  </body>
</html>
