(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{150:function(t,e,a){t.exports=a.p+"assets/img/example-grafana-dashboard.b4a1b8e9.png"},151:function(t,e,a){t.exports=a.p+"assets/img/grafana-influxdb-datasource.f01bbeb6.png"},152:function(t,e,a){t.exports=a.p+"assets/img/grafana-new-dashboard.4d4e6824.png"},153:function(t,e,a){t.exports=a.p+"assets/img/grafana-send-raw-query.282f517b.png"},154:function(t,e,a){t.exports=a.p+"assets/img/grafana-receive-raw-query.c64314e8.png"},155:function(t,e,a){t.exports=a.p+"assets/img/grafana-partyinfo-rate.8741233a.png"},156:function(t,e,a){t.exports=a.p+"assets/img/grafana-sendraw-rate-query.93f958af.png"},165:function(t,e,a){"use strict";a.r(e);var s=a(0),r=Object(s.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("Tessera can be used with InfluxDB and Prometheus time-series databases to record API usage metrics.  The data recorded can be visualised either by creating a custom dashboard or by using an existing dashboarding tool such as Grafana.")]),t._v(" "),s("p",[t._v("In addition, Tessera logs can be searched, analyzed and monitored using Splunk.  Splunk can be set up in such a way that the logs for multiple Tessera nodes in a network are accessible from a single centralized Splunk instance.")]),t._v(" "),s("h2",{attrs:{id:"api-metrics"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#api-metrics","aria-hidden":"true"}},[t._v("↳")]),t._v(" API Metrics")]),t._v(" "),s("p",[t._v("Tessera can record the following usage metrics for each endpoint of its API:")]),t._v(" "),s("ul",[s("li",[t._v("Average Response Time")]),t._v(" "),s("li",[t._v("Max Response Time")]),t._v(" "),s("li",[t._v("Min Response Time")]),t._v(" "),s("li",[t._v("Request Count")]),t._v(" "),s("li",[t._v("Requests Per Second")])]),t._v(" "),s("p",[t._v("These metrics can be stored in an InfluxDB or Prometheus time-series database for further analysis.")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://www.influxdata.com/time-series-platform/influxdb/",target:"_blank",rel:"noopener noreferrer"}},[t._v("InfluxDB"),s("OutboundLink")],1),t._v(' should be used when it is preferred for metrics to be "pushed" from Tessera to the DB (i.e. Tessera starts a service which periodically writes the latest metrics to the DB by calling the DBs API)')]),t._v(" "),s("li",[s("a",{attrs:{href:"https://prometheus.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Prometheus"),s("OutboundLink")],1),t._v(' should be used when it is preferred for metrics to be "pulled" from Tessera by the DB (i.e. Tessera exposes a '),s("code",[t._v("/metrics")]),t._v(" API endpoint which the DB periodically calls to fetch the latest metrics)")])]),t._v(" "),s("p",[t._v("Both databases integrate well with the open source dashboard editor "),s("a",{attrs:{href:"https://grafana.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Grafana"),s("OutboundLink")],1),t._v(" to allow for easy creation of dashboards to visualise the data being captured from Tessera.")]),t._v(" "),s("h3",{attrs:{id:"using-influxdb"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#using-influxdb","aria-hidden":"true"}},[t._v("↳")]),t._v(" Using InfluxDB")]),t._v(" "),s("p",[t._v("See the "),s("a",{attrs:{href:"https://docs.influxdata.com/influxdb",target:"_blank",rel:"noopener noreferrer"}},[t._v("InfluxDB documentation"),s("OutboundLink")],1),t._v(" for details on how to set up an InfluxDB database ready for use with Tessera.  A summary of the steps is as follows:")]),t._v(" "),s("ol",[s("li",[s("a",{attrs:{href:"https://docs.influxdata.com/influxdb/v1.7/introduction/installation/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Install InfluxDB"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("Start the InfluxDB server"),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("influxd -config /path/to/influx.conf\n")])])]),t._v("For local development/testing the default configuration file (Linux: "),s("code",[t._v("/etc/influxdb/influxdb.conf")]),t._v(", macOS: "),s("code",[t._v("/usr/local/etc/influxdb.conf")]),t._v("), should be sufficient.  For further configuration options see "),s("a",{attrs:{href:"https://docs.influxdata.com/influxdb/v1.7/administration/config/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Configuring InfluxDB"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("Connect to the InfluxDB server using the "),s("a",{attrs:{href:"https://docs.influxdata.com/influxdb/v1.7/tools/shell/",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("influx")]),t._v(" CLI"),s("OutboundLink")],1),t._v(" and create a new DB.  If using the default config, this is simply:"),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("influx\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" CREATE DATABASE myDb\n")])])])]),t._v(" "),s("li",[t._v("To view data stored in the database use the "),s("a",{attrs:{href:"https://docs.influxdata.com/influxdb/v1.7/query_language/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Influx Query Language"),s("OutboundLink")],1),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("influx\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" USE myDb\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" SHOW MEASUREMENTS\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" SELECT * FROM "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("measurement"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])])])]),t._v(" "),s("p",[t._v("!!! info\nThe InfluxDB HTTP API can be called directly as an alternative to using the "),s("code",[t._v("influx")]),t._v(" CLI")]),t._v(" "),s("p",[t._v("Each Tessera server type (i.e. "),s("code",[t._v("P2P")]),t._v(", "),s("code",[t._v("Q2T")]),t._v(", "),s("code",[t._v("ADMIN")]),t._v(", "),s("code",[t._v("THIRDPARTY")]),t._v(", "),s("code",[t._v("ENCLAVE")]),t._v(") can be configured to store API metrics in an InfluxDB.  These servers can be configured to store metrics to the same DB or separate ones.  Not all servers need to be configured to store metrics.")]),t._v(" "),s("p",[t._v("To configure a server to use an InfluxDB, add "),s("code",[t._v("influxConfig")]),t._v(" to the server config.  For example:")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"serverConfigs"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"app"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Q2T"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"enabled"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"serverAddress"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"unix:/path/to/tm.ipc"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"communicationType"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"REST"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"influxConfig"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"serverAddress"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://localhost:8086"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// InfluxDB server address")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dbName"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"myDb"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("                           "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// InfluxDB DB name (DB must already exist)")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pushIntervalInSecs"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("                   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// How frequently Tessera will push new metrics to the DB")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"sslConfig"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("                              "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Config required if InfluxDB server is using TLS")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"tls"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"STRICT"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"sslConfigType"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"CLIENT_ONLY"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"clientTrustMode"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"CA"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"clientTrustStore"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/path/to/truststore.jks"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"clientTrustStorePassword"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"password"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"clientKeyStore"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"path/to/truststore.jks"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"clientKeyStorePassword"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"password"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"app"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"P2P"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"enabled"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"serverAddress"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost:9001"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"communicationType"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"REST"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"influxConfig"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"serverAddress"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost:8087"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dbName"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"anotherDb"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pushIntervalInSecs"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("h4",{attrs:{id:"influxdb-tls-configuration"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#influxdb-tls-configuration","aria-hidden":"true"}},[t._v("↳")]),t._v(" InfluxDB TLS Configuration")]),t._v(" "),s("p",[t._v("InfluxDB supports 1-way TLS.  This allows clients to validate the identity of the InfluxDB server and provides data encryption.")]),t._v(" "),s("p",[t._v("See "),s("a",{attrs:{href:"https://docs.influxdata.com/influxdb/v1.7/administration/https_setup/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Enabling HTTPS with InfluxDB"),s("OutboundLink")],1),t._v(" for details on how to secure an InfluxDB server with TLS.  A summary of the steps is as follows:")]),t._v(" "),s("ol",[s("li",[t._v("Obtain a CA/self-signed certificate and key (either as separate "),s("code",[t._v(".crt")]),t._v(" and "),s("code",[t._v(".key")]),t._v(" files or as a combined "),s("code",[t._v(".pem")]),t._v(" file)")]),t._v(" "),s("li",[t._v("Enable HTTPS in "),s("code",[t._v("influx.conf")]),t._v(":"),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Determines whether HTTPS is enabled.")]),t._v("\nhttps-enabled "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The SSL certificate to use when HTTPS is enabled.")]),t._v("\nhttps-certificate "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/path/to/certAndKey.pem"')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Use a separate private key location.")]),t._v("\nhttps-private-key "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/path/to/certAndKey.pem"')]),t._v("\n")])])])]),t._v(" "),s("li",[t._v("Restart the InfluxDB server to apply the config changes")])]),t._v(" "),s("p",[t._v("To allow Tessera to communicate with a TLS-secured InfluxDB, "),s("code",[t._v("sslConfig")]),t._v(" must be provided.  To configure Tessera as the client in 1-way TLS:")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"sslConfig"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"tls"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"STRICT"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"sslConfigType"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"CLIENT_ONLY"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"clientTrustMode"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"CA"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"clientTrustStore"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/path/to/truststore.jks"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"clientTrustStorePassword"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"password"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"clientKeyStore"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"path/to/truststore.jks"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"clientKeyStorePassword"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"password"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"environmentVariablePrefix"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"INFLUX"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("where "),s("code",[t._v("truststore.jks")]),t._v(" is a Java KeyStore format file containing the trusted certificates for the Tessera client (e.g. the certificate of the CA used to create the InfluxDB certificate).")]),t._v(" "),s("p",[t._v("If securing the keystore with a password this password should be provided.  Passwords can be provided either in the config (e.g. "),s("code",[t._v("clientTrustStorePassword")]),t._v(") or as environment variables (using "),s("code",[t._v("environmentVariablePrefix")]),t._v(" and setting "),s("code",[t._v("<PREFIX>_TESSERA_CLIENT_TRUSTSTORE_PWD")]),t._v(").  The "),s("a",{attrs:{href:"../../Configuration/TLS"}},[t._v("TLS Config")]),t._v(" documentation explains this in more detail.")]),t._v(" "),s("p",[t._v("As Tessera expects 2-way TLS, a "),s("code",[t._v(".jks")]),t._v(" file for the "),s("code",[t._v("clientKeyStore")]),t._v(" must also be provided.  This will not be used so can simply be set as the truststore.")]),t._v(" "),s("h3",{attrs:{id:"using-prometheus"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#using-prometheus","aria-hidden":"true"}},[t._v("↳")]),t._v(" Using Prometheus")]),t._v(" "),s("p",[t._v("The "),s("a",{attrs:{href:"https://prometheus.io/docs/introduction/overview/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Prometheus documentation"),s("OutboundLink")],1),t._v(" provides all the information needed to get Prometheus setup and ready to integrate with Tessera.  The "),s("a",{attrs:{href:"https://prometheus.io/docs/introduction/first_steps/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Prometheus First Steps"),s("OutboundLink")],1),t._v(" is a good starting point.  A summary of the steps to store Tessera metrics in a Prometheus DB are as follows:")]),t._v(" "),s("ol",[s("li",[t._v("Install Prometheus")]),t._v(" "),s("li",[t._v("Create a "),s("code",[t._v("prometheus.yml")]),t._v(" configuration file to provide Prometheus with the necessary information to pull metrics from Tessera.  A simple Prometheus config for use with the [7nodes example network](../../../Getting Started/7Nodes) is:"),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("global")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("scrape_interval")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("     15s\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("evaluation_interval")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 15s \n\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("scrape_configs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("job_name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" tessera"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("7nodes\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("static_configs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("targets")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'localhost:9001'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'localhost:9002'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'localhost:9003'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'localhost:9004'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'localhost:9005'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'localhost:9006'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'localhost:9007'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])])]),t._v(" "),s("li",[t._v("Start Tessera.  As Tessera always exposes the "),s("code",[t._v("metrics")]),t._v(" endpoint no additional configuration of Tessera is required")]),t._v(" "),s("li",[t._v("Start Prometheus"),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("prometheus --config.file"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("prometheus.yml\n")])])])]),t._v(" "),s("li",[t._v("To view data stored in the database, access the Prometheus UI (by default "),s("code",[t._v("localhost:9090")]),t._v(", this address can be changed in "),s("code",[t._v("prometheus.yml")]),t._v(") and use the "),s("a",{attrs:{href:"https://prometheus.io/docs/prometheus/latest/querying/basics/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Prometheus Query Language"),s("OutboundLink")],1)])]),t._v(" "),s("h3",{attrs:{id:"creating-a-grafana-dashboard"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#creating-a-grafana-dashboard","aria-hidden":"true"}},[t._v("↳")]),t._v(" Creating a Grafana dashboard")]),t._v(" "),s("p",[t._v("Grafana can be used to create dashboards from data stored in InfluxDB or Prometheus databases.  See the "),s("a",{attrs:{href:"http://docs.grafana.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Grafana documentation"),s("OutboundLink")],1),t._v(" and "),s("a",{attrs:{href:"https://grafana.com/docs/guides/getting_started/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Grafana Getting Started"),s("OutboundLink")],1),t._v(" for details on how to set up a Grafana instance and integrate it with databases.  A summary of the steps is as follows:")]),t._v(" "),s("ol",[s("li",[s("a",{attrs:{href:"https://grafana.com/docs/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Install and start Grafana"),s("OutboundLink")],1),t._v(" as described for your OS (if using the default config, Grafana will start on port "),s("code",[t._v("3000")]),t._v(" and require login/password "),s("code",[t._v("admin/admin")]),t._v(" to access the dashboard)")]),t._v(" "),s("li",[t._v("Create a Data Source to provide the necessary details to connect to the database")]),t._v(" "),s("li",[t._v("Create a new Dashboard")]),t._v(" "),s("li",[t._v("Add panels to the dashboard.  Panels are the graphs, tables, statistics etc. that make up a dashboard. The New Panel wizard allows the components of the panel to be configured:\n"),s("ul",[s("li",[t._v("Queries: Details the query to use retrieve data from the datasource, see the following links for info on using the Query Editor for "),s("a",{attrs:{href:"https://grafana.com/docs/features/datasources/influxdb/",target:"_blank",rel:"noopener noreferrer"}},[t._v("InfluxDB"),s("OutboundLink")],1),t._v(" and "),s("a",{attrs:{href:"https://grafana.com/docs/features/datasources/prometheus/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Prometheus"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("Visualization: How to present the data queried, including panel type, axis headings etc.")])])])]),t._v(" "),s("h4",{attrs:{id:"example-dashboard"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example-dashboard","aria-hidden":"true"}},[t._v("↳")]),t._v(" Example dashboard")]),t._v(" "),s("p",[s("a",{attrs:{href:"../../../images/tessera/monitoring/example-grafana-dashboard.png"}},[s("img",{attrs:{src:a(150),alt:"example-grafana-dashboard.png"}})])]),t._v(" "),s("p",[t._v("To create this dashboard, a [7nodes example network](../../../Getting Started/7Nodes) was started, with each Tessera node configured to store its "),s("code",[t._v("P2P")]),t._v(" and "),s("code",[t._v("Q2T")]),t._v(" metrics to the same InfluxDB.  Several runs of the Smilo Acceptance Tests were run against this network to simulate network activity.")]),t._v(" "),s("p",[t._v("As can be seen in the top-right corner, the dashboard was set to only show data collected in the past 15 mins.")]),t._v(" "),s("p",[t._v("To create a dashboard similar to this:")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("Create an InfluxDB datasource within Grafana:")]),t._v(" "),s("ol",[s("li",[t._v("Hover over the cog icon in the left sidebar")]),t._v(" "),s("li",[t._v("Data Sources")]),t._v(" "),s("li",[t._v("Add data source")]),t._v(" "),s("li",[t._v("Select the type of DB to connect to (e.g. InfluxDB or Prometheus)")]),t._v(" "),s("li",[t._v("Fill out the form to provide all necessary DB connection information, e.g.:\n"),s("a",{attrs:{href:"../../../images/tessera/monitoring/grafana-influxdb-datasource.png"}},[s("img",{attrs:{src:a(151),alt:"grafana-influxdb-datasource.png"}})])])])]),t._v(" "),s("li",[s("p",[t._v("Create a new dashboard")]),t._v(" "),s("ol",[s("li",[t._v("Hover over the plus icon in the left sidebar")]),t._v(" "),s("li",[t._v("Dashboard")]),t._v(" "),s("li",[t._v("Add Query to configure the first panel")]),t._v(" "),s("li",[t._v("Add Panel in the top-right to add additional panels\n"),s("a",{attrs:{href:"../../../images/tessera/monitoring/grafana-new-dashboard.png"}},[s("img",{attrs:{src:a(152),alt:"grafana-new-dashboard.png"}})])])]),t._v(" "),s("p",[t._v("!!! note\nFor each of the following examples, additional options such as titles, axis labels and formatting can be configured by navigating the menus in the left-hand sidebar")]),t._v(" "),s("pre",[s("code",[t._v(" [![grafana-panel-sidebar.png](../../../images/tessera/monitoring/grafana-panel-sidebar.png)](../../../images/tessera/monitoring/grafana-panel-sidebar.png)\n")])])]),t._v(" "),s("li",[s("p",[t._v("Create "),s("em",[t._v("sendRaw requests")]),t._v(" panel")]),t._v(" "),s("ol",[s("li",[t._v("Select the correct datasource from the "),s("em",[t._v("Queries to")]),t._v(" dropdown list")]),t._v(" "),s("li",[t._v("Construct the query as shown in the below image.  This retrieves the data for the "),s("code",[t._v("sendraw")]),t._v(" API from the InfluxDB, finds the sum of the "),s("code",[t._v("RequestCount")]),t._v(" for this data (i.e. the total number of requests) and groups by "),s("code",[t._v("instance")]),t._v(" (i.e. each Tessera node).  "),s("code",[t._v("time($_interval)")]),t._v(" automatically scales the graph resolution for the time range and graph width.\n"),s("a",{attrs:{href:"../../../images/tessera/monitoring/grafana-send-raw-query.png"}},[s("img",{attrs:{src:a(153),alt:"grafana-send-raw-query.png"}})])])]),t._v(" "),s("p",[t._v("This panel shows the number of private payloads sent to Tessera using the "),s("code",[t._v("sendraw")]),t._v(" API over time.")])]),t._v(" "),s("li",[s("p",[t._v("Create "),s("em",[t._v("receiveRaw requests")]),t._v(" panel")]),t._v(" "),s("ol",[s("li",[t._v("Select the correct datasource from the "),s("em",[t._v("Queries to")]),t._v(" dropdown list")]),t._v(" "),s("li",[t._v("Construct the query as shown in the below image.  This retrieves the data for the "),s("code",[t._v("receiveraw")]),t._v(" API from the InfluxDB, finds the sum of the "),s("code",[t._v("RequestCount")]),t._v(" for this data (i.e. the total number of requests) and groups by "),s("code",[t._v("instance")]),t._v(" (i.e. each Tessera node).  "),s("code",[t._v("time($_interval)")]),t._v(" automatically scales the graph resolution for the time range and graph width.\n"),s("a",{attrs:{href:"../../../images/tessera/monitoring/grafana-receive-raw-query.png"}},[s("img",{attrs:{src:a(154),alt:"grafana-receive-raw-query.png"}})])])]),t._v(" "),s("p",[t._v("This panel shows the number of private payloads retrieved from Tessera using the "),s("code",[t._v("receiveraw")]),t._v(" API over time.")])]),t._v(" "),s("li",[s("p",[t._v("Create "),s("em",[t._v("partyinfo request rate (Tessera network health)")]),t._v(" panel")]),t._v(" "),s("ol",[s("li",[t._v("Select the correct datasource from the "),s("em",[t._v("Queries to")]),t._v(" dropdown list")]),t._v(" "),s("li",[t._v("Construct the query as shown in the below image.  This retrieves the data for the "),s("code",[t._v("partyinfo")]),t._v(" API from the InfluxDB, finds the non-negative derivative of the "),s("code",[t._v("RequestCount")]),t._v(" for this data and groups by "),s("code",[t._v("instance")]),t._v(" (i.e. each Tessera node).  "),s("code",[t._v("non_negative_derivative(1s)")]),t._v(" calculates the per second change in "),s("code",[t._v("RequestCount")]),t._v(" and ignores negative values that will occur if a node is stopped and restarted.\n"),s("a",{attrs:{href:"../../../images/tessera/monitoring/grafana-partyinfo-rate.png"}},[s("img",{attrs:{src:a(155),alt:"grafana-partyinfo-rate.png"}})])])]),t._v(" "),s("p",[t._v("This panel shows the rate of POST requests per second to "),s("code",[t._v("partyinfo")]),t._v(". For this network of 7 healthy nodes, this rate fluctuates between 5.5 and 6.5 requests/sec.  At approx 09:37 node 1 was killed and the partyinfo rate across all nodes immediately drops.  This is because they are no longer receiving requests to their "),s("code",[t._v("partyinfo")]),t._v(" API from node 1.  At 09:41 node 1 is restarted and the rates return to their original values.")]),t._v(" "),s("p",[t._v("This metric can be used as an indirect method of monitoring the health of the network.  Using some of the more advanced InfluxDB query options available in Grafana and the other metrics measurements available it may be possible to make this result more explicit.")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://grafana.com/docs/alerting/notifications/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Alerts and rules"),s("OutboundLink")],1),t._v(" can be configured to determine when a node has disconnected and send notifications to pre-configured channels (e.g. Slack, email, etc.).")])]),t._v(" "),s("li",[s("p",[t._v("Create "),s("em",[t._v("sendRaw rate")]),t._v(" panel")]),t._v(" "),s("ol",[s("li",[t._v("Select the correct datasource from the "),s("em",[t._v("Queries to")]),t._v(" dropdown list")]),t._v(" "),s("li",[t._v("Construct the query as shown in the below image.  This retrieves the data for the "),s("code",[t._v("sendraw")]),t._v(" API from the InfluxDB, finds the sum of the "),s("code",[t._v("RequestRate")]),t._v(" for this data and groups by "),s("code",[t._v("instance")]),t._v(" (i.e. each Tessera node).  "),s("code",[t._v("time($_interval)")]),t._v(" automatically scales the graph resolution for the time range and graph width.\n"),s("a",{attrs:{href:"../../../images/tessera/monitoring/grafana-sendraw-rate-query.png"}},[s("img",{attrs:{src:a(156),alt:"grafana-sendraw-rate-query.png"}})])])]),t._v(" "),s("p",[t._v("The POST "),s("code",[t._v("sendraw")]),t._v(" API is used by Smilo whenever a private transaction is sent using the "),s("code",[t._v("eth_sendTransaction")]),t._v(" or "),s("code",[t._v("personal_sendTransaction")]),t._v(" API.  This panel gives a good indication of the private tx throughput in Smilo.  Note that if the "),s("code",[t._v("sendraw")]),t._v(" API is called by another process, the count will not be a true representation of Smilo traffic.")])])]),t._v(" "),s("h2",{attrs:{id:"monitoring-a-tessera-network-with-splunk"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#monitoring-a-tessera-network-with-splunk","aria-hidden":"true"}},[t._v("↳")]),t._v(" Monitoring a Tessera network with Splunk")]),t._v(" "),s("p",[t._v("Splunk can be used to search, analyze and monitor the logs of Tessera nodes.")]),t._v(" "),s("p",[t._v("To consolidate the logs from multiple Tessera nodes in a network requires setting up Splunk and Splunk Universal Forwarders.  The following pages from the Splunk documentation are a good starting point for understanding how to achieve this:")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"http://docs.splunk.com/Documentation/Forwarder/7.1.2/Forwarder/Consolidatedatafrommultiplehosts",target:"_blank",rel:"noopener noreferrer"}},[t._v("Consolidate data from multiple hosts"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"http://docs.splunk.com/Documentation/Splunk/7.1.2/Forwarding/EnableforwardingonaSplunkEnterpriseinstance#Set_up_the_universal_forwarder",target:"_blank",rel:"noopener noreferrer"}},[t._v("Set up the Universal Forwarder"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"http://docs.splunk.com/Documentation/Forwarder/7.1.2/Forwarder/Configuretheuniversalforwarder",target:"_blank",rel:"noopener noreferrer"}},[t._v("Configure the Universal Forwarder"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"http://docs.splunk.com/Documentation/Forwarder/7.1.2/Forwarder/Enableareceiver",target:"_blank",rel:"noopener noreferrer"}},[t._v("Enable a receiver"),s("OutboundLink")],1)])]),t._v(" "),s("p",[t._v("The general steps to consolidate the logs for a Tessera network in Splunk are:")]),t._v(" "),s("ol",[s("li",[t._v("Set up a central Splunk instance if one does not already exist.  Typically this will be on a separate host to the hosts running the Tessera nodes.  This is known as the "),s("em",[t._v("Receiver")]),t._v(".")]),t._v(" "),s("li",[t._v("Configure the Tessera hosts to forward their node's logs to the "),s("em",[t._v("Receiver")]),t._v(" by:\n"),s("ol",[s("li",[s("p",[t._v("Configuring the format and output location of the node's logs.  This is achieved by configuring logback (the logging framework used by Tessera) at node start-up.")]),t._v(" "),s("p",[t._v("The following example XML configures logback to save Tessera's logs to a file.  See the "),s("a",{attrs:{href:"https://logback.qos.ch/manual/configuration.html#syntax",target:"_blank",rel:"noopener noreferrer"}},[t._v("Logback documentation"),s("OutboundLink")],1),t._v(" for more information on configuring logback:")]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token prolog"}},[t._v('<?xml version="1.0" encoding="UTF-8"?>')]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("configuration")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("            \n       "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("appender")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("FILE"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ch.qos.logback.core.FileAppender"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n           "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("file")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("/path/to/file.log"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("file")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n           "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("encoder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n               "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("pattern")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("pattern")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n           "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("encoder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("appender")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("    \n       \n       "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("logger")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("org.glassfish.jersey.internal.inject.Providers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("level")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ERROR"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("logger")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("org.hibernate.validator.internal.util.Version"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("level")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ERROR"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("logger")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("org.hibernate.validator.internal.engine.ConfigurationImpl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("level")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ERROR"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\n       "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("root")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("level")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("INFO"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n           "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("appender-ref")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("FILE"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("root")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("configuration")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("To start Tessera with an XML configuration file:")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("java -Dlogback.configurationFile"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/path/to/logback-config.xml -jar /path/to/tessera-app-"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("version"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("-app.jar -configfile /path/to/config.json\n")])])])]),t._v(" "),s("li",[s("p",[t._v("Set up Splunk "),s("em",[t._v("Universal Forwarders")]),t._v(" (lightweight Splunk clients) on each Tessera host to forward log data for their node to the "),s("em",[t._v("Receiver")])])]),t._v(" "),s("li",[s("p",[t._v("Set up the Splunk "),s("em",[t._v("Receiver")]),t._v(" to listen and receive logging data from the "),s("em",[t._v("Universal Forwarders")])])])])])])])}),[],!1,null,null,null);e.default=r.exports}}]);