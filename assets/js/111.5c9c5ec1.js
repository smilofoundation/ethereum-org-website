(window.webpackJsonp=window.webpackJsonp||[]).push([[111],{207:function(e,t,o){"use strict";o.r(t);var a=o(0),n=Object(a.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h1",{attrs:{id:"dns-for-smilo"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#dns-for-smilo","aria-hidden":"true"}},[e._v("↳")]),e._v(" DNS for Smilo")]),e._v(" "),o("p",[e._v("DNS support in Smilo has two distinct areas, usage in the static nodes file and usage in the\nnode discovery protocol. You are free to use one and not the other, or to mix them as the use case\nrequires.")]),e._v(" "),o("h2",{attrs:{id:"static-nodes"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#static-nodes","aria-hidden":"true"}},[e._v("↳")]),e._v(" Static nodes")]),e._v(" "),o("p",[e._v("Static nodes are nodes we keep reference to even if the node is not alive, so that is the nodes comes alive,\nthen we can connect to it. Hostnames are permitted here, and are resolved once at startup. If a static peer goes offline\nand its IP address changes, then it is expected that that peer would re-establish the connection in a fully static\nnetwork, or have discovery enabled.")]),e._v(" "),o("h2",{attrs:{id:"discovery"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#discovery","aria-hidden":"true"}},[e._v("↳")]),e._v(" Discovery")]),e._v(" "),o("p",[e._v("DNS is not supported for the discovery protocol. Use a bootnode instead, which can use a DNS name that is repeatedly\nresolved.")]),e._v(" "),o("h2",{attrs:{id:"compatibility"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#compatibility","aria-hidden":"true"}},[e._v("↳")]),e._v(" Compatibility")]),e._v(" "),o("p",[e._v("For Raft, the whole network must be on version 2.4.0 of Smilo for DNS to function properly.  DNS must\nbe explicitly enabled using the "),o("code",[e._v("--raftdnsenable")]),e._v(" flag for each node once the node has migrated to version 2.4.0 of Smilo\nThe network runs fine when some nodes are in 2.4.0 version and some in older version as long as this feature is not enabled. For safe migration the recommended approach is as below:")]),e._v(" "),o("ul",[o("li",[e._v("migrate the nodes to "),o("code",[e._v("geth")]),e._v(" 2.4.0 version without using "),o("code",[e._v("--raftdnsenable")]),e._v(" flag")]),e._v(" "),o("li",[e._v("once the network is fully migrated, restart the nodes with "),o("code",[e._v("--raftdnsenable")]),e._v(" to enable the feature")])]),e._v(" "),o("p",[e._v("Please note that in a partially migrated network  (where some nodes are on version 2.4.0 and others on lower version) "),o("strong",[e._v("with DNS feature enabled")]),e._v(" for migrated nodes, "),o("code",[e._v("raft.addPeer")]),e._v(" should not be invoked with Hostname till entire network migrates to 2.4.0 version. If invoked, this call will crash all nodes running in older version and these nodes will have to restarted with "),o("code",[e._v("geth")]),e._v(" of version 2.4.0 of Smilo. "),o("code",[e._v("raft.addPeer")]),e._v(" can still be invoked with IP address and network will work fine.")]),e._v(" "),o("h3",{attrs:{id:"note"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#note","aria-hidden":"true"}},[e._v("↳")]),e._v(" Note")]),e._v(" "),o("p",[e._v("In a network where all nodes are running on Smilo version 2.4.0, with few nodes enabled for DNS, we recommend the\n"),o("code",[e._v("--verbosity")]),e._v(" to be 3 or below. We have observed that nodes which are not enabled for DNS fail to restart if\n"),o("code",[e._v("raft.addPeer")]),e._v(" is invoked with host name if "),o("code",[e._v("--verbosity")]),e._v(" is set above 3.")])])}),[],!1,null,null,null);t.default=n.exports}}]);