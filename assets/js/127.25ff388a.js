(window.webpackJsonp=window.webpackJsonp||[]).push([[127],{172:function(t,e,a){"use strict";a.r(e);var s=a(0),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("The "),a("code",[t._v("RawTransactionManager")]),t._v(" module of Smilo.js provides access to private transaction APIs that require a connection to a "),a("a",{attrs:{href:"../../Privacy/Privacy-Manager"}},[t._v("Privacy Manager")]),t._v(".")]),t._v(" "),a("h2",{attrs:{id:"example"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#example","aria-hidden":"true"}},[t._v("↳")]),t._v(" Example")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Web3 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"web3"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" smilojs "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Smilo-js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" web3 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Web3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost:22000"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" tlsOptions "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" fs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFileSync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./cert.key"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    clcert"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" fs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFileSync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./cert.pem"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    cacert"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" fs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFileSync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./cacert.pem"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    allowInsecure"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" enclaveOptions "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    privateUrl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost:9081"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    tlsSettings"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" tlsOptions\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" txnMngr "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" smilojs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("RawTransactionManager")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" enclaveOptions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\ntxnMngr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendRawTransaction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"parameters"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#parameters","aria-hidden":"true"}},[t._v("↳")]),t._v(" Parameters")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("param")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("type")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("required")]),t._v(" "),a("th",[t._v("description")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[a("span",{staticStyle:{"white-space":"nowrap"}},[a("code",[t._v("web3")])])]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[a("code",[t._v("Object")])]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),a("td",[t._v("web3 instance")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[a("span",{staticStyle:{"white-space":"nowrap"}},[a("code",[t._v("enclaveOptions")])])]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[a("code",[t._v("Object")])]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),a("td",[t._v("Privacy Manager connection configuration - see "),a("a",{attrs:{href:"#enclaveoptions"}},[t._v("enclaveOptions")])])])])]),t._v(" "),a("h3",{attrs:{id:"enclaveoptions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#enclaveoptions","aria-hidden":"true"}},[t._v("↳")]),t._v(" enclaveOptions")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("param")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("type")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("required")]),t._v(" "),a("th",[t._v("description")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[a("span",{staticStyle:{"white-space":"nowrap"}},[a("code",[t._v("privateUrl")])])]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[a("code",[t._v("String")])]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yes (unless "),a("code",[t._v("ipcPath")]),t._v(" is provided)")]),t._v(" "),a("td",[t._v("Tessera "),a("code",[t._v("ThirdParty")]),t._v(" server url (if using the Constellation Privacy Manager use "),a("code",[t._v("ipcPath")]),t._v(" instead)")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[a("span",{staticStyle:{"white-space":"nowrap"}},[a("code",[t._v("ipcPath")])])]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[a("code",[t._v("String")])]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),a("td",[t._v("path to Privacy Manager "),a("code",[t._v(".ipc")]),t._v(" socket file, "),a("code",[t._v("privateUrl")]),t._v(" is preferred")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[a("span",{staticStyle:{"white-space":"nowrap"}},[a("code",[t._v("tlsSettings")])])]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[a("code",[t._v("Object")])]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),a("td",[t._v("TLS configuration for HTTPS Privacy Manager connections - see "),a("a",{attrs:{href:"#tlssettings"}},[t._v("tlsSettings")])])])])]),t._v(" "),a("h3",{attrs:{id:"tlssettings"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tlssettings","aria-hidden":"true"}},[t._v("↳")]),t._v(" tlsSettings")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("param")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("type")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("required")]),t._v(" "),a("th",[t._v("description")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[a("span",{staticStyle:{"white-space":"nowrap"}},[a("code",[t._v("key")])])]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[a("code",[t._v("String")])]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),a("td",[t._v("client private key as byte string")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[a("span",{staticStyle:{"white-space":"nowrap"}},[a("code",[t._v("clcert")])])]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[a("code",[t._v("String")])]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),a("td",[t._v("client certificate (signed/unsigned) as byte string")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[a("span",{staticStyle:{"white-space":"nowrap"}},[a("code",[t._v("cacert")])])]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[a("code",[t._v("String")])]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),a("td",[t._v("CA certificate as byte string")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[a("span",{staticStyle:{"white-space":"nowrap"}},[a("code",[t._v("allowInsecure")])])]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[a("code",[t._v("boolean")])]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),a("td",[t._v("do not verify the Privacy Manager's certificate (can be used to allow self-signed certificates)")])])])]),t._v(" "),a("h2",{attrs:{id:"methods"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#methods","aria-hidden":"true"}},[t._v("↳")]),t._v(" Methods")]),t._v(" "),a("h3",{attrs:{id:"sendrawtransaction"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sendrawtransaction","aria-hidden":"true"}},[t._v("↳")]),t._v(" sendRawTransaction")]),t._v(" "),a("p",[t._v('!!! info "If using Constellation"\nConstellation privacy managers do not support this method.  Use '),a("a",{attrs:{href:"#sendrawtransactionviasendapi"}},[a("code",[t._v("sendRawTransactionViaSendAPI")])]),t._v(" instead.")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("txnMngr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendRawTransaction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("txnParams"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("Calls Tessera's "),a("code",[t._v("ThirdParty")]),t._v(" "),a("code",[t._v("/storeraw")]),t._v(" API, replaces the "),a("code",[t._v("data")]),t._v(" field in "),a("code",[t._v("txnParams")]),t._v(" with the response (i.e. encrypted-payload hash), signs the transaction with the "),a("code",[t._v("from")]),t._v(" account defined in "),a("code",[t._v("txnParams")]),t._v(", marks the transaction as private, RLP encodes the transaction in hex format, and submits the signed transaction to the blockchain with "),a("code",[t._v("eth_sendRawPrivateTransaction")]),t._v(".")]),t._v(" "),a("h4",{attrs:{id:"parameters-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#parameters-2","aria-hidden":"true"}},[t._v("↳")]),t._v(" Parameters")]),t._v(" "),a("ol",[a("li",[a("code",[t._v("txnParams")]),t._v(" - The transaction to sign and send\n"),a("ul",[a("li",[a("code",[t._v("gasPrice")]),t._v(": "),a("code",[t._v("Number")]),t._v(" - Must always be 0 in Smilo networks")]),t._v(" "),a("li",[a("code",[t._v("gasLimit")]),t._v(": "),a("code",[t._v("Number")]),t._v(" - The amount of gas to use for the transaction")]),t._v(" "),a("li",[a("code",[t._v("to")]),t._v(": "),a("code",[t._v("String")]),t._v(" - (optional) The destination address of the message, left undefined for a contract-creation transaction")]),t._v(" "),a("li",[a("code",[t._v("value")]),t._v(": "),a("code",[t._v("Number")]),t._v(" - (optional) The value transferred for the transaction")]),t._v(" "),a("li",[a("code",[t._v("data")]),t._v(": "),a("code",[t._v("String")]),t._v(" - (optional) Either a byte string containing the associated data of the message, or the initialisation code (bytecode) in the case of a contract-creation transaction")]),t._v(" "),a("li",[a("code",[t._v("from")]),t._v(" - "),a("code",[t._v("Object")]),t._v(": "),a("a",{attrs:{href:"https://web3js.readthedocs.io/en/v1.2.7/web3-eth-accounts.html#decrypt",target:"_blank",rel:"noopener noreferrer"}},[t._v("Decrypted account object"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("code",[t._v("nonce")]),t._v(": "),a("code",[t._v("Number")]),t._v("  - (optional) Integer of a nonce. This allows to overwrite your own pending transactions that use the same nonce")]),t._v(" "),a("li",[a("code",[t._v("privateFrom")]),t._v(": "),a("code",[t._v("String")]),t._v("  - When sending a private transaction, the sending party's base64-encoded public key to use. If not present "),a("em",[t._v("and")]),t._v(" passing "),a("code",[t._v("privateFor")]),t._v(", the default key as configured in the "),a("code",[t._v("TransactionManager")]),t._v(" is used")]),t._v(" "),a("li",[a("code",[t._v("privateFor")]),t._v(": "),a("code",[t._v("List<String>")]),t._v("  - When sending a private transaction, an array of the recipients' base64-encoded public keys")]),t._v(" "),a("li",[a("code",[t._v("isPrivate")]),t._v(": "),a("code",[t._v("boolean")]),t._v(" - Is the transaction private")])])]),t._v(" "),a("li",[a("code",[t._v("Function")]),t._v(" - (optional) If you pass a callback the HTTP request is made asynchronous.")])]),t._v(" "),a("h4",{attrs:{id:"returns"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#returns","aria-hidden":"true"}},[t._v("↳")]),t._v(" Returns")]),t._v(" "),a("p",[t._v("A promise that resolves to the transaction receipt if the transaction was sent successfully, else rejects with an error.")]),t._v(" "),a("h3",{attrs:{id:"sendrawtransactionviasendapi"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sendrawtransactionviasendapi","aria-hidden":"true"}},[t._v("↳")]),t._v(" sendRawTransactionViaSendAPI")]),t._v(" "),a("p",[t._v('!!! info "If using Tessera"\nTessera privacy managers support '),a("a",{attrs:{href:"#sendrawtransaction"}},[a("code",[t._v("sendRawTransaction")])]),t._v(" which should be used instead.  "),a("code",[t._v("sendRawTransactionViaSendAPI")]),t._v(" requires exposing the "),a("code",[t._v("Q2T")]),t._v(" server to the "),a("code",[t._v("js")]),t._v(" app.  Ideally only the "),a("code",[t._v("ThirdParty")]),t._v(" server should be exposed to such applications.")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("txnMngr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendRawTransactionViaSendAPI")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("txnParams"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("Calls Privacy Manager's "),a("code",[t._v("/send")]),t._v(" API to encrypt txn data and send to all participant Privacy Manager nodes, replaces "),a("code",[t._v("data")]),t._v(" field in "),a("code",[t._v("txnParams")]),t._v(" with response (i.e. encrypted-payload hash), signs the transaction with the "),a("code",[t._v("from")]),t._v(" account defined in "),a("code",[t._v("txnParams")]),t._v(", marks the transaction as private, and submits the signed transaction to the blockchain with "),a("code",[t._v("eth_sendRawTransaction")]),t._v(".")]),t._v(" "),a("h4",{attrs:{id:"parameters-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#parameters-3","aria-hidden":"true"}},[t._v("↳")]),t._v(" Parameters")]),t._v(" "),a("ol",[a("li",[a("code",[t._v("txnParams")]),t._v(" - The transaction to sign and send\n"),a("ul",[a("li",[a("code",[t._v("gasPrice")]),t._v(": "),a("code",[t._v("Number")]),t._v(" - Must always be 0 in Smilo networks")]),t._v(" "),a("li",[a("code",[t._v("gasLimit")]),t._v(": "),a("code",[t._v("Number")]),t._v(" - The amount of gas to use for the transaction")]),t._v(" "),a("li",[a("code",[t._v("to")]),t._v(": "),a("code",[t._v("String")]),t._v(" - (optional) The destination address of the message, left undefined for a contract-creation transaction")]),t._v(" "),a("li",[a("code",[t._v("value")]),t._v(": "),a("code",[t._v("Number")]),t._v(" - (optional) The value transferred for the transaction")]),t._v(" "),a("li",[a("code",[t._v("data")]),t._v(": "),a("code",[t._v("String")]),t._v(" - (optional) Either a byte string containing the associated data of the message, or the initialisation code (bytecode) in the case of a contract-creation transaction")]),t._v(" "),a("li",[a("code",[t._v("from")]),t._v(" - "),a("code",[t._v("Object")]),t._v(": "),a("a",{attrs:{href:"https://web3js.readthedocs.io/en/v1.2.7/web3-eth-accounts.html#decrypt",target:"_blank",rel:"noopener noreferrer"}},[t._v("Decrypted account object"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("code",[t._v("nonce")]),t._v(": "),a("code",[t._v("Number")]),t._v("  - (optional) Integer of a nonce. This allows to overwrite your own pending transactions that use the same nonce")]),t._v(" "),a("li",[a("code",[t._v("privateFrom")]),t._v(": "),a("code",[t._v("String")]),t._v("  - When sending a private transaction, the sending party's base64-encoded public key to use. If not present "),a("em",[t._v("and")]),t._v(" passing "),a("code",[t._v("privateFor")]),t._v(", the default key as configured in the "),a("code",[t._v("TransactionManager")]),t._v(" is used")]),t._v(" "),a("li",[a("code",[t._v("privateFor")]),t._v(": "),a("code",[t._v("List<String>")]),t._v("  - When sending a private transaction, an array of the recipients' base64-encoded public keys")]),t._v(" "),a("li",[a("code",[t._v("isPrivate")]),t._v(": "),a("code",[t._v("boolean")]),t._v(" - Is the transaction private")])])]),t._v(" "),a("li",[a("code",[t._v("Function")]),t._v(" - (optional) If you pass a callback the HTTP request is made asynchronous.")])]),t._v(" "),a("h4",{attrs:{id:"returns-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#returns-2","aria-hidden":"true"}},[t._v("↳")]),t._v(" Returns")]),t._v(" "),a("p",[t._v("A promise that resolves to the transaction receipt if the transaction was sent successfully, else rejects with an error.")]),t._v(" "),a("h3",{attrs:{id:"setprivate"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#setprivate","aria-hidden":"true"}},[t._v("↳")]),t._v(" setPrivate")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("txnMngr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setPrivate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rawTransaction"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("Marks a signed transaction as private by changing the value of "),a("code",[t._v("v")]),t._v(" to "),a("code",[t._v("37")]),t._v(" or "),a("code",[t._v("38")]),t._v(".")]),t._v(" "),a("h4",{attrs:{id:"parameters-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#parameters-4","aria-hidden":"true"}},[t._v("↳")]),t._v(" Parameters")]),t._v(" "),a("ol",[a("li",[a("code",[t._v("rawTransaction")]),t._v(": "),a("code",[t._v("String")]),t._v(" - RLP-encoded hex-format signed transaction")])]),t._v(" "),a("h4",{attrs:{id:"returns-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#returns-3","aria-hidden":"true"}},[t._v("↳")]),t._v(" Returns")]),t._v(" "),a("p",[t._v("Updated RLP-encoded hex-format signed transaction")]),t._v(" "),a("h3",{attrs:{id:"storerawrequest"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#storerawrequest","aria-hidden":"true"}},[t._v("↳")]),t._v(" storeRawRequest")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("txnMngr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("storeRawRequest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" privateFrom"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("Calls Tessera's "),a("code",[t._v("ThirdParty")]),t._v(" "),a("code",[t._v("/storeraw")]),t._v(" API to encrypt the provided "),a("code",[t._v("data")]),t._v(" and store in preparation for a "),a("code",[t._v("eth_sendRawPrivateTransaction")]),t._v(".")]),t._v(" "),a("h4",{attrs:{id:"parameters-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#parameters-5","aria-hidden":"true"}},[t._v("↳")]),t._v(" Parameters")]),t._v(" "),a("ol",[a("li",[a("code",[t._v("data")]),t._v(": "),a("code",[t._v("String")]),t._v(" - Hex encoded private transaction data (i.e. value of "),a("code",[t._v("data")]),t._v("/"),a("code",[t._v("input")]),t._v(" field in the transaction)")]),t._v(" "),a("li",[a("code",[t._v("privateFrom")]),t._v(": "),a("code",[t._v("String")]),t._v(" - Sending party's base64-encoded public key")])]),t._v(" "),a("h4",{attrs:{id:"returns-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#returns-4","aria-hidden":"true"}},[t._v("↳")]),t._v(" Returns")]),t._v(" "),a("p",[t._v("A promise that resolves to the hex-encoded hash of the encrypted "),a("code",[t._v("data")]),t._v(" ("),a("code",[t._v("key")]),t._v(" field) that should be used to replace the "),a("code",[t._v("data")]),t._v(" field of a transaction if externally signing.")]),t._v(" "),a("h3",{attrs:{id:"sendrawrequest"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sendrawrequest","aria-hidden":"true"}},[t._v("↳")]),t._v(" sendRawRequest")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("txnMngr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendRawRequest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rawTransaction"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" privateFor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("Call "),a("code",[t._v("eth_sendRawPrivateTransaction")]),t._v(", sending the signed transaction to the recipients specified in "),a("code",[t._v("privateFor")]),t._v(".")]),t._v(" "),a("h4",{attrs:{id:"parameters-6"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#parameters-6","aria-hidden":"true"}},[t._v("↳")]),t._v(" Parameters")]),t._v(" "),a("ol",[a("li",[a("code",[t._v("rawTransaction")]),t._v(": "),a("code",[t._v("String")]),t._v(" - RLP-encoded hex-format signed transaction")]),t._v(" "),a("li",[a("code",[t._v("privateFor")]),t._v(": "),a("code",[t._v("List<String>")]),t._v(" - List of the recipients' base64-encoded public keys")])]),t._v(" "),a("h4",{attrs:{id:"returns-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#returns-5","aria-hidden":"true"}},[t._v("↳")]),t._v(" Returns")]),t._v(" "),a("p",[t._v("A promise that resolves to the transaction receipt if the transaction was sent successfully, else rejects with an error.")]),t._v(" "),a("h2",{attrs:{id:"examples"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#examples","aria-hidden":"true"}},[t._v("↳")]),t._v(" Examples")]),t._v(" "),a("h3",{attrs:{id:"externally-signing-and-sending-a-private-tx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#externally-signing-and-sending-a-private-tx","aria-hidden":"true"}},[t._v("↳")]),t._v(" Externally signing and sending a private tx")]),t._v(" "),a("p",[t._v("!!!info\nThis is not supported by Constellation and requires Smilo v2.2.0+")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/smilofoundation/Smilo.js/blob/master/7nodes-test/deployContractViaHttp-externalSigningTemplate.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("Code sample"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("ol",[a("li",[a("code",[t._v("storeRawRequest")]),t._v(" to encrypt the transaction "),a("code",[t._v("data")]),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("txnManager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("storeRawRequest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),a("li",[t._v("Replace "),a("code",[t._v("data")]),t._v(" field of transaction with "),a("code",[t._v("key")]),t._v(" field from "),a("code",[t._v("storeRawRequest")]),t._v(" response")]),t._v(" "),a("li",[t._v("Sign the transaction")]),t._v(" "),a("li",[t._v("Mark the signed transaction as private with "),a("code",[t._v("setPrivate")]),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("txnManager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setPrivate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("signedTx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),a("li",[t._v("Send the signed transaction to Smilo with "),a("code",[t._v("sendRawRequest")]),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v(" txnManager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendRawRequest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("serializedTransaction"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" privateFor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])]),t._v(" "),a("h3",{attrs:{id:"other-examples"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#other-examples","aria-hidden":"true"}},[t._v("↳")]),t._v(" Other examples")]),t._v(" "),a("p",[t._v("The "),a("a",{attrs:{href:"https://github.com/smilofoundation/Smilo.js/tree/master/7nodes-test",target:"_blank",rel:"noopener noreferrer"}},[t._v("7nodes-test"),a("OutboundLink")],1),t._v(" directory in the Smilo.js project repo contains examples of Smilo.js usage.  These scripts can be tested with a running "),a("a",{attrs:{href:"https://github.com/smilofoundation/Smilo-examples/tree/master/examples/7nodes",target:"_blank",rel:"noopener noreferrer"}},[t._v("7nodes test network"),a("OutboundLink")],1),t._v(".")])])}),[],!1,null,null,null);e.default=n.exports}}]);