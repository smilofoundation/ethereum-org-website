(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{273:function(e,t,o){"use strict";o.r(t);var a=o(0),n=Object(a.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("pre",[o("code",[e._v("# Upgrade to Smilo 2.6.0\n")])]),e._v(" "),o("p",[e._v("Smilo 2.6.0 upgrades the base "),o("code",[e._v("geth")]),e._v(" version from 1.8.18 to 1.9.7\nSee "),o("a",{attrs:{href:"https://blog.ethereum.org/2019/07/10/geth-v1-9-0/",target:"_blank",rel:"noopener noreferrer"}},[e._v("ethereum 1.9.0"),o("OutboundLink")],1),e._v(" for the complete list if new features added as a part of "),o("code",[e._v("geth")]),e._v(" 1.9.7.")]),e._v(" "),o("p",[o("strong",[e._v("Note")]),e._v(" "),o("code",[e._v("geth")]),e._v(" 1.9.7 has several enhancements at the database layer which are part of Smilo 2.6.0. Hence, once migrates to 2.6.0, it cannot rollback to older version of Quourm. The recommendation is to keep the back of the data directory before upgrading to 2.6.0 which can be used to revert back to older version if necessary.")]),e._v(" "),o("p",[e._v("A node running on Smilo 2.6.0 can coexist on a network where other nodes are running on lower version of Smilo and thus supports node by node upgrade to Smilo 2.6.0. The suggested upgrade process is as described below:")]),e._v(" "),o("ul",[o("li",[e._v("Bring down the node which needs to be upgraded to Smilo 2.6.0. Modify the "),o("code",[e._v("genesis.json")]),e._v(" file to include "),o("code",[e._v("istanbulBlock")]),e._v(" and "),o("code",[e._v("petersburgBlock")]),e._v(". The values for this should be set to an appropriate value in future by when the entire network would have upgraded to Smilo 2.6.0. This is important as the gas calculation logic has changed in "),o("code",[e._v("geth")]),e._v(" 1.9.7. Not setting this value properly can result in "),o("code",[e._v("Bad block error")])]),e._v(" "),o("li",[e._v("Execute "),o("code",[e._v("geth --datadir path/to/datadir init genesis.json")]),e._v(" with the modified "),o("code",[e._v("genesis.json")])]),e._v(" "),o("li",[e._v("Bring up the node in Smilo 2.6.0")])]),e._v(" "),o("h3",{attrs:{id:"note"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#note","aria-hidden":"true"}},[e._v("â†³")]),e._v(" !!! Note")]),e._v(" "),o("ul",[o("li",[e._v("freezerdb - "),o("code",[e._v("geth")]),e._v(" 1.9.7 brings in the feature of freezer db where in block data beyond certain threshold is moved to a different file based storage area. The location for freezerdb can be provided by geth command lines arguments as shown below:")])]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("--datadir.ancient value             Data directory for ancient chain segments (default = inside chaindata)\n")])])]),o("ul",[o("li",[o("p",[e._v("When a node is migrated to this version, "),o("code",[e._v("geth")]),e._v(" by default will create the "),o("code",[e._v("ancient")]),e._v(" data folder and start moving blocks below the immutability threshold (default: 3162240) into the ancient data. If you do not want this movement to happen, use "),o("code",[e._v("--immutabilitythreshold")]),e._v(" to set the immutability threshold to an appropriate value while bringing up "),o("code",[e._v("geth")])])]),e._v(" "),o("li",[o("p",[o("code",[e._v("geth 1.9.7")]),e._v(" by default does not allow keystore based accounts to be unlocked in the start up process. "),o("code",[e._v("geth")]),e._v(" will crash if the unlock is attempted as a part of start up. To enable account unlocking explicitly use "),o("code",[e._v("--allow-insecure-unlock")])])])]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("--allow-insecure-unlock             Allow insecure account unlocking when account-related RPCs are exposed by http\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);