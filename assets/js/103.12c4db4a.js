(window.webpackJsonp=window.webpackJsonp||[]).push([[103],{177:function(e,t,r){"use strict";r.r(t);var o=r(0),i=Object(o.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("p",[e._v("Messages are written to the logs using these rules for the log level:")]),e._v(" "),r("ul",[r("li",[r("code",[e._v("ERROR")]),e._v(": system failures or situations that require some action to ensure correct operation of the system.")]),e._v(" "),r("li",[r("code",[e._v("WARN")]),e._v(": notifications that don't require immediate action or that are indications that a transaction failed.")]),e._v(" "),r("li",[r("code",[e._v("INFO")]),e._v(": information message to allow investigation of issues or to provide reassurance that the system is operating correctly.")]),e._v(" "),r("li",[r("code",[e._v("DEBUG")]),e._v(": very verbose logging to assist with investigation of issues")])]),e._v(" "),r("p",[e._v("The log level is written out in uppercase as part of the log message, this can be used for alert monitoring.")]),e._v(" "),r("h2",{attrs:{id:"errors"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#errors","aria-hidden":"true"}},[e._v("↳")]),e._v(" Errors")]),e._v(" "),r("p",[e._v("Below is a non-exhaustive list of error messages and suggested actions. Braces '{}' indicate where further detail of the root cause is logged as part of the message.")]),e._v(" "),r("table",[r("tr",[r("th",[e._v("Message")]),e._v(" "),r("th",[e._v("Cause")])]),e._v(" "),r("tr",[r("td",[e._v("Error decoding message: {error details}")]),e._v(" "),r("td",[e._v("Invalid base64 in privateFrom/privateFor from Smilo or in tx hash for resend"),r("br"),r("b",[e._v("Action:")]),e._v(" "),r("em",[e._v("Sender needs to provide valid base64")])])]),e._v(" "),r("tr",[r("td",[e._v("Error occurred: {error details} Root cause: {root cause}")]),e._v(" "),r("td",[e._v("Generated for a variety of reasons:\n        "),r("ul",[r("li",[e._v(" Invalid content in message, e.g. "),r("pre",[e._v('curl -X POST "http://localhost:9001/push" \\ '),r("br"),e._v('    -H "accept: application/json" \\'),r("br"),e._v('    -H "Content-Type: application/octet-stream" \\ '),r("br"),e._v('    -d "[ \\"a garbage string\\"]"')])]),e._v(" "),r("li",[e._v(" Could not send message to peer, e.g. "),r("pre",[e._v('"Root cause: Unable to push payload to recipient url'),r("br"),e._v('http://localhost:9001/"')])])]),e._v(" "),r("b",[e._v("Action:")]),e._v(" "),r("em",[e._v("depends on the root cause in the log message")])])]),e._v(" "),r("tr",[r("td",[e._v("Enclave unavailable: {error details}")]),e._v(" "),r("td",[r("b",[e._v("Action:")]),e._v(" "),r("em",[e._v("user needs to check why enclave is unavailable (look in log file for enclave)")])])]),e._v(" "),r("tr",[r("td",[e._v("Entity not found: {error details}")]),e._v(" "),r("td",[e._v("API request received against "),r("code",[e._v("q2tserver/transaction/{key}")]),e._v(" where key is not a tx hash in the DB")])]),e._v(" "),r("tr",[r("td",[e._v("Entity not found:{error details}")]),e._v(" "),r("td",[e._v("Thrown if endpoint doesn't exist on that API, e.g."),r("pre",[e._v("curl -s http://localhost:9001/invalidendpoint")])])]),e._v(" "),r("tr",[r("td",[e._v('Security exception {followed by exception message, like "java.lang.SecurityException: No key found for url 127.1.1.1"}')]),e._v(" "),r("td",[e._v("Thrown if "),r("code",[e._v("enableRemoteKeyValidation: true")]),e._v(" and partyinfo request received from a URL for which we don't hold a public key (i.e. potentially a malicious party)."),r("br"),e._v("Note: if key validation enabled then this exception will be thrown during startup whilst the nodes exchange key information.")])]),e._v(" "),r("tr",[r("td",[e._v("ERROR c.q.t.a.e.DefaultExceptionMapper - HTTP 400 Bad Request")]),e._v(" "),r("td",[e._v("Logged if received message is corrupt/incorrectly formatted, e.g."),r("pre",[e._v('curl -X POST "http://localhost:9001/resend" \\'),r("br"),e._v('    -H "accept: text/plain" \\'),r("br"),e._v('    -H "Content-Type: application/json" \\'),r("br"),e._v('    -d "{ \\"some rubbish\\" }"')])])]),e._v(" "),r("tr",[r("td",[e._v("Error while reading secret from file")]),e._v(" "),r("td",[e._v("Unable to read the secret key (password) from file specified by "),r("code",[e._v("TESSERA_CONFIG_SECRET")]),r("br"),e._v(" "),r("b",[e._v("Action:")]),e._v(" "),r("em",[e._v("ensure the secret key file config is correct, and file can be read")])])]),e._v(" "),r("tr",[r("td",[e._v("unable to initialize encryption facade {error details}")]),e._v(" "),r("td",[e._v("Unable to initialise elliptical curve encryption. Logged error message will give further details"),r("br"),e._v(" "),r("b",[e._v("Action:")]),e._v(" "),r("em",[e._v("check configuration properties")])])]),e._v(" "),r("tr",[r("td",[e._v("unable to generate shared secret {error details}")]),e._v(" "),r("td",[e._v("Unable to generate shared secret for elliptical curve encryption. Logged error message will give further details."),r("br"),e._v(" "),r("b",[e._v("Action:")]),e._v(" "),r("em",[e._v("check configuration properties")])])]),e._v(" "),r("tr",[r("td",[e._v("unable to perform symmetric encryption {error details}")]),e._v(" "),r("td",[e._v("Unable to encrypt data. Logged error message will give further details."),r("br"),e._v(" "),r("b",[e._v("Action:")]),e._v(" "),r("em",[e._v("check configuration properties")])])]),e._v(" "),r("tr",[r("td",[e._v("unable to perform symmetric decryption {error details}")]),e._v(" "),r("td",[e._v("Unable to decrypt data. Logged error message will give further details."),r("br"),e._v(" "),r("b",[e._v("Action:")]),e._v(" "),r("em",[e._v("check configuration properties")])])]),e._v(" "),r("tr",[r("td",[e._v("Error when executing action {action type}, exception details: {error details}")]),e._v(" "),r("td",[e._v(" Unable to start Influx DB. Logged error message will give further details"),r("br"),e._v(" "),r("b",[e._v("Action:")]),e._v(" "),r("em",[e._v("check configuration properties")])])]),e._v(" "),r("tr",[r("td",[e._v("Error creating bean with name 'entityManagerFactory'")]),e._v(" "),r("td",[e._v("Unable to create connection to database due to failure to decrypt the DB password using the supplied secret key"),r("br"),e._v(" "),r("b",[e._v("Action:")]),e._v(" "),r("em",[e._v("ensure that the correct value is supplied for the secret key")])])]),e._v(" "),r("tr",[r("td",[e._v("Config validation issue: {property name} {error details}")]),e._v(" "),r("td",[e._v("Invalid configuration detected"),r("br"),e._v(" "),r("b",[e._v("Action:")]),e._v(" "),r("em",[e._v("correct the configuration of the named property.")])])]),e._v(" "),r("tr",[r("td",[e._v("Invalid json, cause is {error details}")]),e._v(" "),r("td",[e._v("Invalid json in the configuration file"),r("br"),e._v(" "),r("b",[e._v("Action:")]),e._v(" "),r("em",[e._v("check the configuration file for mistakes.")])])]),e._v(" "),r("tr",[r("td",[e._v("Configuration exception, cause is {error details}")]),e._v(" "),r("td",[e._v("Invalid data in the configuration file"),r("br"),e._v(" "),r("b",[e._v("Action:")]),e._v(" "),r("em",[e._v("check the configuration file for mistakes.")])])]),e._v(" "),r("tr",[r("td",[e._v("CLI exception, cause is {error details}")]),e._v(" "),r("td",[e._v("Invalid command line"),r("br"),e._v(" "),r("b",[e._v("Action:")]),e._v(" "),r("em",[e._v("The error details will give further information regarding the action to be taken.")])])])]),e._v(" "),r("h2",{attrs:{id:"warnings"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#warnings","aria-hidden":"true"}},[e._v("↳")]),e._v(" Warnings")]),e._v(" "),r("p",[e._v("Below is a list of warning messages and possible causes. Braces '{}' indicate where further detail of the root cause is logged as part of the message.")]),e._v(" "),r("table",[r("tr",[r("th",[e._v("Message")]),e._v(" "),r("th",[e._v("Cause")])]),e._v(" "),r("tr",[r("td",[e._v("Public key {publicKey} not found when searching for private key")]),e._v(" "),r("td",[e._v("The key in a transaction is not recognised, i.e. it is not the public key of a known participant node.")])]),e._v(" "),r("tr",[r("td",[e._v("Recipient not found for key: {public key}")]),e._v(" "),r("td",[e._v("An unrecognised participant is specified in a transaction."),r("br"),e._v("No action needed.")])]),e._v(" "),r("tr",[r("td",[e._v("Unable to unmarshal payload")]),e._v(" "),r("td",[e._v("A received message is corrupt, or incorrectly formatted")])]),e._v(" "),r("tr",[r("td",[e._v("Remote host {remote host name} with IP {remote host IP} failed whitelist validation")]),e._v(" "),r("td",[e._v("Logged if whitelist validation is enabled and the remote host is not in the whitelist."),r("br"),e._v(" "),r("b",[e._v("Action:")]),e._v(" "),r("em",[e._v("either this is a malicious connection attempt, or mis-configuration")])])]),e._v(" "),r("tr",[r("td",[e._v("Ignoring unknown/unmatched json element: {element tag name}")]),e._v(" "),r("td",[e._v("An unrecognised element has been found in the config file."),r("br"),e._v(" "),r("b",[e._v("Action:")]),e._v(" "),r("em",[e._v("remove or correct the config file entry")])])]),e._v(" "),r("tr",[r("td",[e._v("Not able to find or read any secret for decrypting sensitive values in config")]),e._v(" "),r("td",[e._v("Secret key (password) could not be read from console or password file (see "),r("code",[e._v("TESSERA_CONFIG_SECRET in docs")]),e._v(")."),r("br"),e._v(" "),r("b",[e._v("Action:")]),e._v(" "),r("em",[e._v("correction needed for the secret key or the file access permission")])])]),e._v(" "),r("tr",[r("td",[e._v("Some sensitive values are being given as unencrypted plain text in config. Please note this is NOT recommended for production environment.")]),e._v(" "),r("td",[e._v("Self explanatory")])]),e._v(" "),r("tr",[r("td",[e._v("Not able to parse configured property. Will use default value instead")]),e._v(" "),r("td",[e._v("Error in config file")])]),e._v(" "),r("tr",[r("td",[e._v("IOException while attempting to close remote session {error details}")]),e._v(" "),r("td",[e._v("Only occurs on shutdown, no action needed")])]),e._v(" "),r("tr",[r("td",[e._v("Could not compute the shared key for pub {public key} and priv REDACTED")]),e._v(" "),r("td",[e._v("Possible cause is that a public key does not match the configured cryptography algorithm."),r("br"),e._v(" "),r("b",[e._v("Action:")]),e._v(" "),r("em",[e._v("ensure provided key is correct")])])]),e._v(" "),r("tr",[r("td",[e._v("Could not create sealed payload using shared key {shared key}")]),e._v(" "),r("td",[e._v("Possible cause is that a public key does not match the configured cryptography algorithm."),r("br"),e._v(" "),r("b",[e._v("Action:")]),e._v(" "),r("em",[e._v("ensure provided key is correct")])])]),e._v(" "),r("tr",[r("td",[e._v("Could not open sealed payload using shared key {shared key}")]),e._v(" "),r("td",[e._v("Possible cause that wrong password was given for key file decryption or making a change to the values in the keyfile so that the password no longer works."),r("br"),e._v(" "),r("b",[e._v("Action:")]),e._v(" "),r("em",[e._v("ensure that password is correct for the keyfile")])])]),e._v(" "),r("tr",[r("td",[e._v("Unable to generate a new keypair!")]),e._v(" "),r("td",[e._v("Internal error - potentially an issue with jnacl dependency")])]),e._v(" "),r("tr",[r("td",[e._v("Exception thrown : {exception message} While starting service {service name}")]),e._v(" "),r("td",[e._v("Internal error - failed to start a service")])]),e._v(" "),r("tr",[r("td",[e._v("Invalid key found {remote host url} recipient will be ignored")]),e._v(" "),r("td",[e._v("Remote key validation check failed."),r("br"),e._v("No action needed, however it is a possible indication of a malicious node")])]),e._v(" "),r("tr",[r("td",[e._v("Push returned status code for peer {remote peer url} was {status code}")]),e._v(" "),r("td",[e._v("The peer rejected a transaction 'push' request."),r("br"),e._v(" "),r("b",[e._v("Action:")]),e._v(" "),r("em",[e._v("check logs on peer to see why it failed")])])]),e._v(" "),r("tr",[r("td",[e._v("PartyInfo returned status code for peer{remote peer url} was {status code}")]),e._v(" "),r("td",[e._v("The peer rejected a partyInfo request."),r("br"),e._v(" "),r("b",[e._v("Action:")]),e._v(" "),r("em",[e._v("check logs on peer to see why it failed")])])]),e._v(" "),r("tr",[r("td",[e._v("Unable to resend payload to recipient with public key {public key}, due to {error details}")]),e._v(" "),r("td",[e._v("The peer rejected a transaction push request during a resend operation."),r("br"),e._v(" "),r("b",[e._v("Action:")]),e._v(" "),r("em",[e._v("check reason message, or logs on peer to see why it failed")])])]),e._v(" "),r("tr",[r("td",[e._v("Attempt is being made to update existing key with new url. Please switch on remote key validation to avoid a security breach.")]),e._v(" "),r("td",[e._v("Self explanatory")])]),e._v(" "),r("tr",[r("td",[e._v("Failed to connect to node {remote node url}, due to {error details}")]),e._v(" "),r("td",[e._v("A remote node refused partyinfo request. Can occur if:\n        "),r("ul",[r("li",[e._v("remote node is not running")]),e._v(" "),r("li",[e._v("remote node doesn't recognise this node's public key")]),e._v(" "),r("li",[e._v("remote node doesn't have this node's IP registered against a key")]),e._v(" "),r("li",[e._v("etc")])]),e._v("\n        Can also be expected to occur when nodes are shutdown/restarted, so not necessarily an error.\n    ")])]),e._v(" "),r("tr",[r("td",[e._v("Failed to connect to node {remote node url} for partyInfo, due to {error details}")]),e._v(" "),r("td",[e._v("A node failed partyInfo request during resend to peer."),r("br"),e._v(" "),r("b",[e._v("Action:")]),e._v(" "),r("em",[e._v("check reason message, or logs on peer to see why it failed")])])]),e._v(" "),r("tr",[r("td",[e._v("Failed to make resend request to node {remote node url} for key {public key}, due to {error details}")]),e._v(" "),r("td",[e._v("Peer communication failed during '/resend' request."),r("br"),e._v(" "),r("b",[e._v("Action:")]),e._v(" "),r("em",[e._v("check reason message, or logs on peer to see why it failed")])])])]),e._v(" "),r("p",[e._v("!!! Note\nSome messages will be rearranged to correct logging levels in our next release.")]),e._v(" "),r("h2",{attrs:{id:"to-change-the-default-log-level"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#to-change-the-default-log-level","aria-hidden":"true"}},[e._v("↳")]),e._v(" To change the default log level")]),e._v(" "),r("p",[e._v("The level of logging is controlled by the logback configuration file. The default file packaged with Tessera can be seen "),r("a",{attrs:{href:"https://github.com/smilofoundation/tessera/blob/master/tessera-dist/tessera-launcher/src/main/resources/logback.xml",target:"_blank",rel:"noopener noreferrer"}},[e._v("here"),r("OutboundLink")],1),e._v(".")]),e._v(" "),r("p",[e._v("To specify a different logging configuration, pass a customised logback file on the command line using:\n"),r("code",[e._v("-Dlogback.configurationFile=/path/to/logback.xml")])])])}),[],!1,null,null,null);t.default=i.exports}}]);