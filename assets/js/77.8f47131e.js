(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{242:function(t,a,e){"use strict";e.r(a);var n=e(0),r=Object(n.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"transaction-and-contract-privacy"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#transaction-and-contract-privacy","aria-hidden":"true"}},[t._v("↳")]),t._v(" Transaction and Contract Privacy")]),t._v(" "),e("p",[t._v("Smilo achieves Transaction Privacy by:")]),t._v(" "),e("ol",[e("li",[t._v("Enabling transaction Senders to create a private transaction by marking who is privy to that transaction via the "),e("code",[t._v("privateFor")]),t._v(" parameter")]),t._v(" "),e("li",[t._v("Replacing the payload of a private transaction with a hash of the encrypted payload, such that the original payload is not visible to participants who are not privy to the transaction")]),t._v(" "),e("li",[t._v("Storing encrypted private data off-chain in a separate component called the "),e("a",{attrs:{href:"../Privacy-Manager"}},[t._v("Privacy Manager")]),t._v(".  The Privacy Manager encrypts private data, distributes the encrypted data to other parties that are privy to the transaction, and returns the decrypted payload to those parties")])]),t._v(" "),e("p",[t._v("Smilo introduces the notion of 'Public Transactions' and 'Private Transactions'.  Note that this is a notional concept only and Smilo does not introduce new Transaction Types, but rather, the Ethereum Transaction Model has been extended to include an optional "),e("code",[t._v("privateFor")]),t._v(" parameter (the population of which results in a Transaction being treated as private by Smilo) and the Transaction Type has a new "),e("code",[t._v("IsPrivate")]),t._v(" method to identify such Transactions.")]),t._v(" "),e("h2",{attrs:{id:"public-transactions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#public-transactions","aria-hidden":"true"}},[t._v("↳")]),t._v(" Public Transactions")]),t._v(" "),e("p",[t._v("So called 'Public Transactions' are those Transactions whose payload is visible to all participants of the same Smilo network. These are "),e("a",{attrs:{href:"https://github.com/ethereum/wiki/wiki/JavaScript-API#web3ethsendtransaction",target:"_blank",rel:"noopener noreferrer"}},[t._v("created as standard Ethereum Transactions in the usual way"),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("p",[t._v("Examples of Public Transactions may include Market Data updates from some service provider, or some reference data update such as a correction to a Bond Security definition.")]),t._v(" "),e("p",[t._v("!!! Note\n'Public' Transactions are not Transactions from the public Ethereum network.  Perhaps a more appropriate term would be 'common' or 'global' Transactions, but 'Public' is used to contrast with 'Private' Transactions.")]),t._v(" "),e("h2",{attrs:{id:"private-transactions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#private-transactions","aria-hidden":"true"}},[t._v("↳")]),t._v(" Private Transactions")]),t._v(" "),e("p",[t._v("So called 'Private Transactions' are those Transactions whose payload is only visible to the network participants whose public keys are specified in the "),e("code",[t._v("privateFor")]),t._v(" parameter of the Transaction .  "),e("code",[t._v("privateFor")]),t._v(" can take multiple addresses in a comma separated list. (See Creating Private Transactions under the [Running Smilo](../../Getting Started/running) section).")]),t._v(" "),e("p",[t._v("When the Smilo Node encounters a Transaction with a non-null "),e("code",[t._v("privateFor")]),t._v(" value, it sets the "),e("code",[t._v("V")]),t._v(" value of the Transaction Signature to be either "),e("code",[t._v("37")]),t._v(" or "),e("code",[t._v("38")]),t._v(" (as opposed to "),e("code",[t._v("27")]),t._v(" or "),e("code",[t._v("28")]),t._v(" which are the values used to indicate a Transaction is 'public' as per standard Ethereum as specified in the Ethereum yellow paper).")]),t._v(" "),e("h2",{attrs:{id:"public-vs-private-transaction-handling"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#public-vs-private-transaction-handling","aria-hidden":"true"}},[t._v("↳")]),t._v(" Public vs Private Transaction Handling")]),t._v(" "),e("p",[t._v("Public Transactions are executed in the standard Ethereum way, and so if a Public Transaction is sent to an Account that holds Contract code, each participant will execute the same code and their underlying StateDBs will be updated accordingly.")]),t._v(" "),e("p",[t._v("Private Transactions, however, are not executed per standard Ethereum: prior to the sender's Smilo Node propagating the Transaction to the rest of the network, it replaces the original Transaction Payload with a hash of the encrypted Payload that it receives from Constellation/Tessera. Participants that are party to the Transaction will be able to replace the hash with the actual payload via their Constellation/Tessera instance, whilst those Participants that are not party will only see the hash.")]),t._v(" "),e("p",[t._v("The result is that if a Private Transaction is sent to an Account that holds Contract code, those participants who are not party to the Transaction will simply end up skipping the Transaction, and therefore not execute the Contract code.  However those participants that are party to the Transaction will replace the hash with the original Payload before calling the EVM for execution, and their StateDB will be updated accordingly.  In absence of making corresponding changes to the geth client, these two sets of participants would therefore end up with different StateDBs and not be able to reach consensus. So in order to support this bifurcation of contract state, Smilo stores the state of Public contracts in a Public State Trie that is globally synchronised, and it stores the state of Private contracts in a Private State Trie that is not synchronised globally.  For details on how Consensus is achieved in light of this, please refer to "),e("a",{attrs:{href:"../../Consensus/Consensus"}},[t._v("Smilo Consensus")]),t._v(".")])])}),[],!1,null,null,null);a.default=r.exports}}]);